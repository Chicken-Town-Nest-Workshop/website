[{"title":"å°é›é®æœ‰å…©ç¯‡æ–°æ–‡ç« ","type":0,"sectionRef":"#","url":"/blog/exceptionFilterAndCliCMD","content":"","keywords":"","version":null},{"title":"Nest CLI å¸¸ç”¨æŒ‡ä»¤â€‹","type":1,"pageTitle":"å°é›é®æœ‰å…©ç¯‡æ–°æ–‡ç« ","url":"/blog/exceptionFilterAndCliCMD#nest-cli-å¸¸ç”¨æŒ‡ä»¤","content":"è¨˜éŒ„äº†å¸¸ç”¨çš„ CLI æŒ‡ä»¤ å‰å¾€è§€çœ‹æ–‡ç« ... ","version":null,"tagName":"h2"},{"title":"Exception filterâ€‹","type":1,"pageTitle":"å°é›é®æœ‰å…©ç¯‡æ–°æ–‡ç« ","url":"/blog/exceptionFilterAndCliCMD#exception-filter","content":"Exception filter ç”¨ä¾†æ””æˆª throw çš„ä¾‹å¤–è¨Šæ¯ï¼Œ ä¸¦å°‡è¨Šæ¯åšè™•ç†ä¹‹å¾Œå†å›å‚³çµ¦å®¢æˆ¶ç«¯ å‰å¾€è§€çœ‹æ–‡ç« ... ","version":null,"tagName":"h2"},{"title":"å°é›é®ç¥å¤§å®¶æœ‰å€‹ç¾å¥½çš„å‘¨æœ«â€‹","type":1,"pageTitle":"å°é›é®æœ‰å…©ç¯‡æ–°æ–‡ç« ","url":"/blog/exceptionFilterAndCliCMD#å°é›é®ç¥å¤§å®¶æœ‰å€‹ç¾å¥½çš„å‘¨æœ«","content":"","version":null,"tagName":"h2"},{"title":"date time è¸©é›·å°æ•…äº‹","type":0,"sectionRef":"#","url":"/blog/date time è¸©é›·å°æ•…äº‹","content":"","keywords":"","version":null},{"title":"è¸©é›·ç¶“éâ€‹","type":1,"pageTitle":"date time è¸©é›·å°æ•…äº‹","url":"/blog/date time è¸©é›·å°æ•…äº‹#è¸©é›·ç¶“é","content":"å„ä½é®æ°‘å€‘ï¼Œäº‹æƒ…æ˜¯é€™æ¨£å­çš„ï¼Œç‚ºäº†çµ¦å¤§å®¶æœ‰è‰¯å¥½çš„å®ˆæ™‚è§€å¿µï¼Œæ‰€ä»¥å°é®æ±ºå®šå…ˆåšå¥½æ™‚é–“æ¨¡çµ„ï¼Œä½†æ˜¯åœ¨æ™‚é–“æ¨¡çµ„é–‹ç™¼çš„éç¨‹ä¸­å‘¢ï¼Œè¸©åˆ°äº†ä¸€å€‹åœ°é›·ã€‚ æœ€ä¸€é–‹å§‹åœ¨ controller å›å‚³äº† Date ç‰©ä»¶ä½†åœ¨ sagger ä¸Šé¡¯ç¤ºè¶Šçœ‹è¶Šä¸å°å‹ï¼Œç™¼ç¾å®ƒé¡¯ç¤ºçš„æ˜¯æ ¼æ—å¨æ²»æ™‚é–“  @Get() getTownDateTime(): Date { const date = this.clockService.getDateTime(); return date; }  åœ¨å‰¯é®é•·çš„å”åŠ©ä¸‹çµ‚æ–¼å¾—åˆ°å¹¾å€‹çµè«– ç›´æ¥å›å‚³ Date çš„è©±ï¼Œæœƒè¢«ç•¶æˆä¸€å€‹æ–°çš„ç‰©ä»¶å›å‚³å‰é ˆè¦å°‡å¥¹è½‰ç‚ºå­—ä¸²æˆ–æ•¸å­—å­—ä¸²: ä½¿ç”¨çš„æ˜¯ ISO stringæ•¸å­—: ä½¿ç”¨çš„æ˜¯ unix time æœ€çµ‚å°é›é®åœ¨é€™é‚Šé¸æ“‡äº† ISO string  /** * å–å¾— +8 æ™‚é–“ */ getDateTime(): string { const offset = 8 * 60; // 8å°æ™‚çš„åˆ†é˜æ•¸ const utcTime = this.getTimeZone().getTime(); // ä½¿ç”¨ getTimeZone() å–å¾—æ¨™æº–æ™‚é–“ const localTime = new Date(utcTime + offset * 60 * 1000); return localTime.toISOString(); }  ","version":null,"tagName":"h2"},{"title":"å°é›é®åœ¨é€™é‚Šé ç¥å¤§å®¶ä¸­ç§‹ç¯€å¿«æ¨‚â€‹","type":1,"pageTitle":"date time è¸©é›·å°æ•…äº‹","url":"/blog/date time è¸©é›·å°æ•…äº‹#å°é›é®åœ¨é€™é‚Šé ç¥å¤§å®¶ä¸­ç§‹ç¯€å¿«æ¨‚","content":"å°é›é®æ™‚é–“æ¨¡çµ„ä¸Šç·šåš• ","version":null,"tagName":"h2"},{"title":"å°é›é®æ–‡ç« æ›´æ–°äº†","type":0,"sectionRef":"#","url":"/blog/nestJsCrudAndAutoLoad","content":"","keywords":"","version":null},{"title":"Entity Auto Loadâ€‹","type":1,"pageTitle":"å°é›é®æ–‡ç« æ›´æ–°äº†","url":"/blog/nestJsCrudAndAutoLoad#entity-auto-load","content":"TypeORM æœ‰å…©ç¨®æ¨¡å¼ è‡ªå‹•è¼‰å…¥: TypeORM æœƒè‡ªå‹•æœå°‹éœ€è¦è¨»å†Šçš„æª”æ¡ˆæ‰‹å‹•è¼‰å…¥: é ˆç”±é–‹ç™¼è€…æ±ºå®šæ‡‰è©²è¦è¼‰å…¥é‚£äº› Entity å‰å¾€è§€çœ‹æ–‡ç« ... ","version":null,"tagName":"h2"},{"title":"TypeORM çš„ CRUDâ€‹","type":1,"pageTitle":"å°é›é®æ–‡ç« æ›´æ–°äº†","url":"/blog/nestJsCrudAndAutoLoad#typeorm-çš„-crud","content":"åœ¨æ•´å€‹ TypeORM æœ€æ ¸å¿ƒçš„è§€å¿µå°±æ˜¯ CRUD CRUD å‰‡æ˜¯ä¸€å€‹ç¸®å¯«ï¼Œä»£è¡¨äº†ä»¥ä¸‹å››å€‹åŸºæœ¬æ“ä½œï¼š Create (æ–°å¢)ï¼šåœ¨è³‡æ–™åº«ä¸­æ–°å¢è¨˜éŒ„æˆ–è³‡æ–™Read (è®€å–)ï¼šå¾è³‡æ–™åº«ä¸­è®€å–æˆ–æœå°‹è¨˜éŒ„æˆ–è³‡æ–™Update (æ›´æ–°)ï¼šæ›´æ–°ç¾æœ‰è¨˜éŒ„æˆ–è³‡æ–™çš„å…§å®¹Delete (åˆªé™¤)ï¼šå¾è³‡æ–™åº«ä¸­åˆªé™¤ç¾æœ‰çš„è¨˜éŒ„æˆ–è³‡æ–™ å‰å¾€è§€çœ‹æ–‡ç« ... ","version":null,"tagName":"h2"},{"title":"å°é›é®å‘¼ç±²å¤§å®¶é¢±é¢¨å¤©æ²’äº‹ç›¡é‡åˆ¥å‡ºé–€â€‹","type":1,"pageTitle":"å°é›é®æ–‡ç« æ›´æ–°äº†","url":"/blog/nestJsCrudAndAutoLoad#å°é›é®å‘¼ç±²å¤§å®¶é¢±é¢¨å¤©æ²’äº‹ç›¡é‡åˆ¥å‡ºé–€","content":"","version":null,"tagName":"h2"},{"title":"å°é›é®æ–‡ç« æ›´æ–°äº†","type":0,"sectionRef":"#","url":"/blog/nestJsLifecycle","content":"","keywords":"","version":null},{"title":"Nest js ç”Ÿå‘½é€±æœŸâ€‹","type":1,"pageTitle":"å°é›é®æ–‡ç« æ›´æ–°äº†","url":"/blog/nestJsLifecycle#nest-js-ç”Ÿå‘½é€±æœŸ","content":"","version":null,"tagName":"h2"},{"title":"ä¸»ç¨‹å¼ç”Ÿå‘½é€±æœŸâ€‹","type":1,"pageTitle":"å°é›é®æ–‡ç« æ›´æ–°äº†","url":"/blog/nestJsLifecycle#ä¸»ç¨‹å¼ç”Ÿå‘½é€±æœŸ","content":"","version":null,"tagName":"h3"},{"title":"Runtime ç”Ÿå‘½é€±æœŸâ€‹","type":1,"pageTitle":"å°é›é®æ–‡ç« æ›´æ–°äº†","url":"/blog/nestJsLifecycle#runtime-ç”Ÿå‘½é€±æœŸ","content":"å‰å¾€è§€çœ‹æ–‡ç« ... ","version":null,"tagName":"h3"},{"title":"å°é›é®ç¥å¤§å®¶æœ‰å€‹ç¾å¥½çš„ä¸€å‘¨â€‹","type":1,"pageTitle":"å°é›é®æ–‡ç« æ›´æ–°äº†","url":"/blog/nestJsLifecycle#å°é›é®ç¥å¤§å®¶æœ‰å€‹ç¾å¥½çš„ä¸€å‘¨","content":"","version":null,"tagName":"h2"},{"title":"ä¾†è½å‰¯é®é•·çš„æ¼”å”±æœƒ","type":0,"sectionRef":"#","url":"/blog/nestJsWorkshopLifecycle","content":"","keywords":"","version":null},{"title":"ç°¡å ±â€‹","type":1,"pageTitle":"ä¾†è½å‰¯é®é•·çš„æ¼”å”±æœƒ","url":"/blog/nestJsWorkshopLifecycle#ç°¡å ±","content":" å‰å¾€è§€çœ‹å®Œæ•´ç°¡å ±... ","version":null,"tagName":"h2"},{"title":"ç¯„ä¾‹ GitHubâ€‹","type":1,"pageTitle":"ä¾†è½å‰¯é®é•·çš„æ¼”å”±æœƒ","url":"/blog/nestJsWorkshopLifecycle#ç¯„ä¾‹-github","content":"This is nestjs request sample for test request lifecycle å‰å¾€è§€çœ‹å®Œæ•´ç¨‹å¼ç¢¼... ","version":null,"tagName":"h2"},{"title":"å°é›é®è¶•å¿«ä¾†è½å‰¯é®é•·çš„æ¼”å”±æœƒâ€‹","type":1,"pageTitle":"ä¾†è½å‰¯é®é•·çš„æ¼”å”±æœƒ","url":"/blog/nestJsWorkshopLifecycle#å°é›é®è¶•å¿«ä¾†è½å‰¯é®é•·çš„æ¼”å”±æœƒ","content":"","version":null,"tagName":"h2"},{"title":"nest æ¨¡æ¿ä¸Šç·šåš•!","type":0,"sectionRef":"#","url":"/blog/nest æ¨¡æ¿","content":"","keywords":"","version":null},{"title":"æ¨¡æ¿å…§å®¹â€‹","type":1,"pageTitle":"nest æ¨¡æ¿ä¸Šç·šåš•!","url":"/blog/nest æ¨¡æ¿#æ¨¡æ¿å…§å®¹","content":"swaggerdockerfile ","version":null,"tagName":"h2"},{"title":"ä½¿ç”¨æ–¹å¼â€‹","type":1,"pageTitle":"nest æ¨¡æ¿ä¸Šç·šåš•!","url":"/blog/nest æ¨¡æ¿#ä½¿ç”¨æ–¹å¼","content":"","version":null,"tagName":"h2"},{"title":"ä¸‹è¼‰â€‹","type":1,"pageTitle":"nest æ¨¡æ¿ä¸Šç·šåš•!","url":"/blog/nest æ¨¡æ¿#ä¸‹è¼‰","content":"è¼‰é» code &gt; download Zipè§£å£“ç¸® ","version":null,"tagName":"h3"},{"title":"æ¨¡æ¿ä½¿ç”¨æ–¹å¼â€‹","type":1,"pageTitle":"nest æ¨¡æ¿ä¸Šç·šåš•!","url":"/blog/nest æ¨¡æ¿#æ¨¡æ¿ä½¿ç”¨æ–¹å¼","content":"ä¿®æ”¹å°ˆæ¡ˆåç¨±æ–¼ package.js ä¿®æ”¹ name { &quot;name&quot;: &quot;[å°ˆæ¡ˆåç¨±]&quot;, &quot;version&quot;: &quot;0.0.1&quot;, &quot;description&quot;: &quot;&quot;, &quot;author&quot;: &quot;&quot;, &quot;private&quot;: true, &quot;license&quot;: &quot;UNLICENSED&quot;, &quot;scripts&quot;: { &quot;build&quot;: &quot;nest build&quot;, -- ä¸‹ç•¥ --  å®‰è£ä¾è³´ pnpm i  å•Ÿå‹• pnpm start  é–‹å•Ÿ: http://localhost:3055/api ","version":null,"tagName":"h3"},{"title":"dockerâ€‹","type":1,"pageTitle":"nest æ¨¡æ¿ä¸Šç·šåš•!","url":"/blog/nest æ¨¡æ¿#docker","content":"","version":null,"tagName":"h2"},{"title":"å»ºç«‹ imageâ€‹","type":1,"pageTitle":"nest æ¨¡æ¿ä¸Šç·šåš•!","url":"/blog/nest æ¨¡æ¿#å»ºç«‹-image","content":"docker build --pull --rm -f &quot;.dockerfile&quot; -t [image name]:[version] .  ","version":null,"tagName":"h3"},{"title":"run imageâ€‹","type":1,"pageTitle":"nest æ¨¡æ¿ä¸Šç·šåš•!","url":"/blog/nest æ¨¡æ¿#run-image","content":"docker run --name nest-app -p 3055:3055 [image name]:[version]  é–‹å•Ÿ: http://localhost:3055/api ","version":null,"tagName":"h3"},{"title":"å°é›é®åœ¨é€™é‚Šç¥ç¦å¤§å®¶æœ‰ç¾å¥½çš„ä¸€å¤©â€‹","type":1,"pageTitle":"nest æ¨¡æ¿ä¸Šç·šåš•!","url":"/blog/nest æ¨¡æ¿#å°é›é®åœ¨é€™é‚Šç¥ç¦å¤§å®¶æœ‰ç¾å¥½çš„ä¸€å¤©","content":"","version":null,"tagName":"h2"},{"title":"å‰¯é®é•·ä¸Šä»»å•¦!","type":0,"sectionRef":"#","url":"/blog/å‰¯é®é•·ä¸Šä»»","content":"ä»Šå¤©çµ‚æ–¼æœ‰å‰¯é®é•·ä¸Šä»»å•¦! å‰¯é®é•·å®£è¨€: æ²³æ²³æ²³æ²³æ²³æ²³","keywords":"","version":null},{"title":"åœ–æ›¸é¤¨é¤¨é•·ä¸Šä»»å•¦!","type":0,"sectionRef":"#","url":"/blog/æ–°åœ–æ›¸é¤¨é¤¨é•·","content":"åœ–æ›¸é¤¨é¤¨é•·ä¸Šä»»å•¦! åœ–æ›¸é¤¨é¤¨é•·å®£è¨€: å¯çˆ½äº†","keywords":"","version":null},{"title":"ä»Šå¤©æ˜¯å°é›é®çš„ç”Ÿæ—¥","type":0,"sectionRef":"#","url":"/blog/å°é›é®èª•ç”Ÿ","content":"","keywords":"","version":null},{"title":"é®é•·å®£è¨€â€‹","type":1,"pageTitle":"ä»Šå¤©æ˜¯å°é›é®çš„ç”Ÿæ—¥","url":"/blog/å°é›é®èª•ç”Ÿ#é®é•·å®£è¨€","content":"å°é›é®æœ€å¤§çš„å®—æ—¨å°±æ˜¯ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥å¿«å¿«æ¨‚æ¨‚çš„å­¸ Nest åŠªåŠ›è®“å°é®çš„ç‰ˆåœ–é€æ¼¸æ“´å¤§ ","version":null,"tagName":"h2"},{"title":"å°é®ç›®æ¨™â€‹","type":1,"pageTitle":"ä»Šå¤©æ˜¯å°é›é®çš„ç”Ÿæ—¥","url":"/blog/å°é›é®èª•ç”Ÿ#å°é®ç›®æ¨™","content":"æä¾› Nest çš„æŠ€è¡“æ–‡ä»¶ ä¸¦ä¸”ä»¥å°é®è£¡çš„å„å€‹å»ºè¨­ï¼Œä¾†åšä¸­å­¸ Nest çš„æ¨¡çµ„é‹ç”¨ ","version":null,"tagName":"h2"},{"title":"ğŸ˜ï¸ å°é›é®","type":0,"sectionRef":"#","url":"/docs/intro","content":"","keywords":"","version":"Next"},{"title":"æ­¡è¿å…‰è‡¨å°é›é®â€‹","type":1,"pageTitle":"ğŸ˜ï¸ å°é›é®","url":"/docs/intro#æ­¡è¿å…‰è‡¨å°é›é®","content":"å°é›é®èª•ç”Ÿæ–¼ 2023/9/26 ","version":"Next","tagName":"h2"},{"title":"å°é›é®çš„é¡˜æ™¯â€‹","type":1,"pageTitle":"ğŸ˜ï¸ å°é›é®","url":"/docs/intro#å°é›é®çš„é¡˜æ™¯","content":"åœ¨å°é›é®çš„ä¸€å€‹æ™®é€šçš„æ—©æ™¨ï¼Œå¤ªé™½å‰›å‰›å‡èµ·ï¼Œç…§äº®äº†é€™å€‹å¯§éœçš„å°é®ï¼Œå°é›é®æ˜¯ä¸€å€‹ä½æ–¼é„‰é–“çš„å°é®ï¼Œä»¥å…¶ç¨ç‰¹çš„ä¸‰å¤§ä¸»é¡Œè€Œèå é¦–å…ˆæœ‰ä¸€å€‹ç†™ç†™æ”˜æ”˜çš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯å°é›é®çš„Nest JSå·¥ä½œåŠ é€™å€‹å·¥ä½œåŠæ˜¯ä¸€å€‹èšé›†äº†æŠ€è¡“æ„›å¥½è€…å’Œé–‹ç™¼è€…çš„åœ°æ–¹ï¼Œä»–å€‘ç¶“å¸¸èˆ‰è¾¦å„ç¨®æŠ€è¡“ç ”è¨æœƒå’Œå·¥ä½œåŠï¼Œåˆ†äº«æœ€æ–°çš„Nest JSæŠ€è¡“å’Œå¿ƒå¾—ï¼Œ æ¯ç•¶æœ‰æ–°çš„æŠ€è¡“æ–‡ç« ä¸Šæ¶æ™‚ï¼Œæ•´å€‹å°é®éƒ½æœƒç‚ºä¹‹æŒ¯å¥®ï¼Œå› ç‚ºé€™äº›æ–‡ç« ç‚ºä»–å€‘å¸¶ä¾†äº†ç„¡çª®çš„çŸ¥è­˜å’Œéˆæ„Ÿ å…¶æ¬¡å°é›é®çš„é€ é®è¨ˆç•«è®“é€™å€‹åœ°æ–¹æ›´åŠ ç‰¹åˆ¥ é€™å€‹è¨ˆç•«çš„ç›®æ¨™æ˜¯å°‡å°é›é®æ‰“é€ æˆä¸€å€‹æ“æœ‰å„ç¨®å„æ¨£åº—é‹ªçš„ç¹è¯å°é®ï¼Œæ¯ä¸€å®¶åº—éƒ½æ˜¯ä¸€å€‹ç¨ç‰¹çš„æ¨¡çµ„ï¼Œæä¾›ä¸åŒçš„å•†å“å’Œæœå‹™ã€‚é€™å€‹è¨ˆç•«å·²ç¶“å¸å¼•äº†è¨±å¤šå‰µæ¥­å®¶å’Œåº—ä¸»ï¼Œä»–å€‘ç´›ç´›åœ¨å°é®é–‹è¨­äº†å„ç¨®å„æ¨£çš„åº—é‹ªï¼Œå¾å’–å•¡é¤¨åˆ°æ‰‹å·¥è—å“åº—æ‡‰æœ‰ç›¡æœ‰ï¼Œå°é›é®çš„å±…æ°‘ä»¥åŠé é“è€Œä¾†çš„éŠå®¢éƒ½äº«å—è‘—é€™å€‹å¤šå§¿å¤šå½©çš„å°é® æœ€å¾Œå°é®æ–°èæ˜¯å°é›é®å±…æ°‘çš„é‡è¦ä¿¡æ¯ä¾†æº æ¯ç•¶å°é®æœ‰é‡å¤§æ¶ˆæ¯æ™‚ï¼Œå¦‚ä¸€å®¶æ–°åº—é–‹æ¥­ã€ä¸€å€‹ç‰¹åˆ¥æ´»å‹•å³å°‡èˆ‰è¡Œæˆ–æ˜¯æŠ€è¡“å·¥ä½œåŠçš„é€šçŸ¥ï¼Œéƒ½æœƒåœ¨å°é®æ–°èä¸Šç™¼å¸ƒï¼Œé€™ä»½æ–°èä¸åƒ…æ˜¯å±…æ°‘ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†ï¼Œé‚„æ˜¯è®“ä»–å€‘ä¿æŒè¯ç¹«çš„æ©‹æ¨‘ ç¸½ä¹‹å°é›é®é›–ç„¶å°å·§ï¼Œå»å› å…¶ä¸‰å¤§ä¸»é¡Œè€Œå……æ»¿æ´»åŠ›ã€‚é€™å€‹å°é®ä¸åƒ…æ˜¯æŠ€è¡“çš„æ¨‚åœ’ï¼Œä¹Ÿæ˜¯ä¸€å€‹å……æ»¿å‰µæ„å’Œå¤šæ¨£æ€§çš„ç¤¾å€ã€‚ç„¡è«–æ˜¯å±…æ°‘é‚„æ˜¯éŠå®¢ï¼Œæ¯å€‹äººéƒ½èƒ½åœ¨é€™å€‹ç‰¹åˆ¥çš„å°é®æ‰¾åˆ°è‡ªå·±çš„ä½ç½®ï¼Œå…±åŒåƒèˆ‡é€™å€‹ç¨ç‰¹çš„ç”Ÿæ´»æ–¹å¼ ","version":"Next","tagName":"h2"},{"title":"ğŸ” å®‰è£ Swagger","type":0,"sectionRef":"#","url":"/docs/nest/addSwagger","content":"","keywords":"","version":"Next"},{"title":"æ­¥é©Ÿâ€‹","type":1,"pageTitle":"ğŸ” å®‰è£ Swagger","url":"/docs/nest/addSwagger#æ­¥é©Ÿ","content":"","version":"Next","tagName":"h2"},{"title":"å®‰è£â€‹","type":1,"pageTitle":"ğŸ” å®‰è£ Swagger","url":"/docs/nest/addSwagger#å®‰è£","content":"pnpm install --save @nestjs/swagger  ","version":"Next","tagName":"h3"},{"title":"Bootstrap è¨­å®šâ€‹","type":1,"pageTitle":"ğŸ” å®‰è£ Swagger","url":"/docs/nest/addSwagger#bootstrap-è¨­å®š","content":"import { NestFactory } from '@nestjs/core'; import { SwaggerModule, DocumentBuilder } from '@nestjs/swagger'; //swagger import { AppModule } from './app.module'; async function bootstrap() { const app = await NestFactory.create(AppModule); // [B] swagger const config = new DocumentBuilder() .setTitle('Car API') .setDescription('The Car API description') .setVersion('1.0') .addTag('Car') .build(); const document = SwaggerModule.createDocument(app, config); SwaggerModule.setup('api', app, document); // [E] swagger await app.listen(3050); } bootstrap();  ","version":"Next","tagName":"h3"},{"title":"å•Ÿå‹•â€‹","type":1,"pageTitle":"ğŸ” å®‰è£ Swagger","url":"/docs/nest/addSwagger#å•Ÿå‹•","content":"pnpm start  http://localhost:3050/api ","version":"Next","tagName":"h3"},{"title":"ğŸ” é—œæ–¼ NestJS","type":0,"sectionRef":"#","url":"/docs/nest/about","content":"","keywords":"","version":"Next"},{"title":"èªè¨€â€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#èªè¨€","content":"åœ¨ NestJS æ¡†æ¶åº•ä¸‹ï¼Œæˆ‘å€‘å°‡ä½¿ç”¨ TypeScript ä¾†åšç‚ºä¸»è¦ç·¨å¯«çš„èªè¨€ ","version":"Next","tagName":"h2"},{"title":"ç’°å¢ƒâ€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#ç’°å¢ƒ","content":"å®‰è£ Node (&gt;= 16) nvm å®‰è£NestJS CLI # å®‰è£ CLI npm i -g @nestjs/cli  ","version":"Next","tagName":"h2"},{"title":"å»ºç«‹å°ˆæ¡ˆâ€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#å»ºç«‹å°ˆæ¡ˆ","content":"","version":"Next","tagName":"h2"},{"title":"å»ºç«‹â€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#å»ºç«‹","content":"# å»ºç«‹å°ˆæ¡ˆ nest new [project-name]  ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ TypeScript åŠŸèƒ½â€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#ä½¿ç”¨-typescript-åŠŸèƒ½","content":"# å»ºç«‹å°ˆæ¡ˆ nest new [project-name] --strict  ","version":"Next","tagName":"h3"},{"title":"å»ºç«‹å…¬ç”¨ libâ€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#å»ºç«‹å…¬ç”¨-lib","content":"# å»ºç«‹å°ˆæ¡ˆ cd [project-name]; nest g lib ${library-name}  ","version":"Next","tagName":"h3"},{"title":"å°ˆæ¡ˆæ¶æ§‹â€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#å°ˆæ¡ˆæ¶æ§‹","content":"","version":"Next","tagName":"h2"},{"title":"ç›®éŒ„çµæ§‹â€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#ç›®éŒ„çµæ§‹","content":"src â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€main.ts  ","version":"Next","tagName":"h3"},{"title":"æª”æ¡ˆèªªæ˜â€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#æª”æ¡ˆèªªæ˜","content":"æª”æ¡ˆ\tæè¿°app.controller.ts\tå…·æœ‰å–®ä¸€è·¯ç”±çš„åŸºæœ¬æ§åˆ¶å™¨ app.controller.spec.ts\tæ§åˆ¶å™¨çš„å–®å…ƒæ¸¬è©¦ app.module.ts\tæ‡‰ç”¨ç¨‹å¼çš„æ ¹æ¨¡çµ„ app.service.ts\tå…·æœ‰å–®ä¸€æ–¹æ³•çš„åŸºæœ¬æœå‹™ main.ts\tæ‡‰ç”¨ç¨‹å¼çš„å…¥å£æª”æ¡ˆï¼Œä½¿ç”¨æ ¸å¿ƒå‡½æ•¸ NestFactory å‰µå»ºä¸€å€‹ Nest æ‡‰ç”¨ç¨‹å¼å¯¦ä¾‹ ","version":"Next","tagName":"h3"},{"title":"main.tsâ€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#maints","content":"import { NestFactory } from '@nestjs/core'; import { AppModule } from './app.module'; async function bootstrap() { const app = await NestFactory.create(AppModule); await app.listen(3000); } bootstrap();  å¯åˆ‡æ›åº•å±¤æ¡†æ¶ç‚º express æˆ– fastify åˆ‡æ›ç‚º express import { NestFactory } from '@nestjs/core'; import { AppModule } from './app.module'; async function bootstrap() { const app = await NestFactory.create&lt;NestExpressApplication&gt;(AppModule); await app.listen(3000); } bootstrap();  åˆ‡æ›ç‚º fastify import { NestFactory } from '@nestjs/core'; import { AppModule } from './app.module'; async function bootstrap() { const app = await NestFactory.create&lt;NestFastifyApplication&gt;(AppModule); await app.listen(3000); } bootstrap();  ","version":"Next","tagName":"h3"},{"title":"Nest js ç”Ÿå‘½é€±æœŸâ€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#nest-js-ç”Ÿå‘½é€±æœŸ","content":"","version":"Next","tagName":"h2"},{"title":"ä¸»ç¨‹å¼ç”Ÿå‘½é€±æœŸâ€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#ä¸»ç¨‹å¼ç”Ÿå‘½é€±æœŸ","content":"","version":"Next","tagName":"h3"},{"title":"Runtime ç”Ÿå‘½é€±æœŸâ€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#runtime-ç”Ÿå‘½é€±æœŸ","content":" ","version":"Next","tagName":"h3"},{"title":"REFâ€‹","type":1,"pageTitle":"ğŸ” é—œæ–¼ NestJS","url":"/docs/nest/about#ref","content":"NestJS å®˜ç¶² æ¢å¤§å“¥ æ•™å­¸ ","version":"Next","tagName":"h2"},{"title":"ğŸ” å°‡ Service æŠ½è±¡åŒ–","type":0,"sectionRef":"#","url":"/docs/nest/cerateServiceInterface","content":"","keywords":"","version":"Next"},{"title":"é—œæ–¼æŠ½è±¡åŒ–â€‹","type":1,"pageTitle":"ğŸ” å°‡ Service æŠ½è±¡åŒ–","url":"/docs/nest/cerateServiceInterface#é—œæ–¼æŠ½è±¡åŒ–","content":"æœƒé€²è¡ŒæŠ½è±¡åŒ–çš„å¹¾å€‹ä¸»è¦åŸå›  é€²è¡Œå–®å…ƒæ¸¬è©¦å‰ï¼Œéœ€è¦åšè³‡æ–™éš”é›¢ç¬¦åˆä»‹é¢éš”é›¢åŸå‰‡è®“æ¨¡çµ„ä¹‹é–“çš„è€¦åˆåº¦é™ä½ï¼Œç¢ºä¿å¾ŒçºŒçš„ç¶­è­·èˆ‡ä¿®æ”¹å¯ä»¥æ›´å®¹æ˜“çš„é€²è¡Œç¬¦åˆä¾è³´åè½‰åŸå‰‡è®“å…¶ä»–å‘¼å«è€…ï¼Œä¾è³´æŠ½è±¡ï¼Œè€Œä¸è¦ä¾è³´ç´°ç¯€ é€šå¸¸é–‹ç™¼éç¨‹æœƒå…ˆå®šç¾©interfaceï¼Œåœ¨å¯¦ä½œç´°ç¯€ ","version":"Next","tagName":"h2"},{"title":"Service æŠ½è±¡åŒ–â€‹","type":1,"pageTitle":"ğŸ” å°‡ Service æŠ½è±¡åŒ–","url":"/docs/nest/cerateServiceInterface#service-æŠ½è±¡åŒ–","content":"ç›®å‰å°ˆæ¡ˆçµæ§‹ src â””â”€user â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€main.ts  ","version":"Next","tagName":"h2"},{"title":"å»ºç«‹ interfaceâ€‹","type":1,"pageTitle":"ğŸ” å°‡ Service æŠ½è±¡åŒ–","url":"/docs/nest/cerateServiceInterface#å»ºç«‹-interface","content":"åœ¨ user è³‡æ–™å¤¾åº•ä¸‹ï¼Œå»ºç«‹ä¸€å€‹ interfaces çš„è³‡æ–™å¤¾ä¸¦åœ¨è£¡é¢å»ºç«‹ä¸€å€‹ user.service.interface.ts çš„æª”æ¡ˆ user â””â”€dto â”‚ â””â”€create-user.dto.ts â”‚ â”‚ â”‚ â””â”€update-user.dto.ts â”‚ â”‚ â”‚ â””â”€user.dto.ts â”‚ â”‚ â”‚ â””â”€index.ts â”‚ â””â”€interface â”‚ â””â”€user.service.interface.ts â”‚ â””â”€user.controller.ts â”‚ â””â”€user.service.ts â”‚ â””â”€user.module.ts  å®šç¾© user.service æ‰€è¦é–‹æ”¾çš„ä»‹é¢ import { UpdateUserDto, CreateUserDto, UserDto } from '../dto'; export interface UserServiceInterface { /** ä½¿ç”¨ store id æŸ¥å‡ºåº•ä¸‹æ‰€æœ‰çš„ä½¿ç”¨è€… * * @param storeId store id * @returns user list */ getUserByStoreId(storeId: string): Promise&lt;Array&lt;UserDto&gt;&gt;; /** ä½¿ç”¨ user id æŸ¥è©¢ä½¿ç”¨è€… * * @param id user id * @returns user */ getUserById(id: string): Promise&lt;UserDto&gt;; /** æ–°å¢ä½¿ç”¨è€… * * @param newUser new user * @param userId update user id * @returns new user list */ createUser(newUser: CreateUserDto, userId: string): Promise&lt;Array&lt;UserDto&gt;&gt;; /**æ›´æ–°ä½¿ç”¨è€… * * @param id user id * @param oldUser edit user * @param userId update user id * @returns user list */ updaterUser( id: string, oldUser: UpdateUserDto, userId: string, ): Promise&lt;Array&lt;UserDto&gt;&gt;; /**åˆªé™¤ä½¿ç”¨è€… * * @param id user id * @returns user list */ deleteUser(id: string): Promise&lt;Array&lt;UserDto&gt;&gt;; }  ","version":"Next","tagName":"h3"},{"title":"ç¹¼æ‰¿ä¸¦å¯¦ä½œä»‹é¢â€‹","type":1,"pageTitle":"ğŸ” å°‡ Service æŠ½è±¡åŒ–","url":"/docs/nest/cerateServiceInterface#ç¹¼æ‰¿ä¸¦å¯¦ä½œä»‹é¢","content":"æ–¼ user.service.ts ç¹¼æ‰¿ä»‹é¢ï¼Œä¸¦ä¸”å¯¦ä½œç´°ç¯€ user â””â”€dto â”‚ â””â”€create-user.dto.ts â”‚ â”‚ â”‚ â””â”€update-user.dto.ts â”‚ â”‚ â”‚ â””â”€user.dto.ts â”‚ â”‚ â”‚ â””â”€index.ts â”‚ â””â”€interface â”‚ â””â”€user.service.interface.ts â”‚ â””â”€user.controller.ts â”‚ â””â”€user.service.ts â”‚ â””â”€user.module.ts  export class UserService implements UserServiceInterface ä½¿ç”¨implementsä¾†ç¹¼æ‰¿ä»‹é¢ä¸¦å¯¦ä½œ import { Injectable } from '@nestjs/common'; import { UserServiceInterface } from './interfaces/user.service.interface'; import { UpdateUserDto, CreateUserDto, UserDto } from './dto'; @Injectable() export class UserService implements UserServiceInterface { /** ä½¿ç”¨ store id æŸ¥å‡ºåº•ä¸‹æ‰€æœ‰çš„ä½¿ç”¨è€… * * @param storeId store id * @returns user list */ async getUserByStoreId(storeId: string): Promise&lt;Array&lt;UserDto&gt;&gt; { let users = new Array&lt;UserDto&gt;(); users.push({ id: 'f7541155-a4ff-4ca2-bfc5-a82ad98e2e86', fullName: 'Big Pig', email: 'BigPig@local.com', phoneNumber: '0900000000', userName: 'pig pig', }); users.push({ id: '80f78f75-37b5-4977-bffc-5afc5db99123', fullName: 'Pink Chicken', email: 'PinkChicken@local.com', phoneNumber: '0900000011', userName: 'Hi Chicken', }); return users; } /** ä½¿ç”¨ user id æŸ¥è©¢ä½¿ç”¨è€… * * @param id user id * @returns user */ async getUserById(id: string): Promise&lt;UserDto&gt; { let user: UserDto = { id: '80f78f75-37b5-4977-bffc-5afc5db99123', fullName: 'Pink Chicken', email: 'PinkChicken@local.com', phoneNumber: '0900000011', userName: 'Hi Chicken', }; return user; } /** æ–°å¢ä½¿ç”¨è€… * * @param newUser new user * @param userId update user id * @returns new user list */ async createUser( newUser: CreateUserDto, userId: string, ): Promise&lt;Array&lt;UserDto&gt;&gt; { let users = new Array&lt;UserDto&gt;(); users.push({ id: '591afd77-32d0-44c2-a487-b6bd8850a0fe', fullName: newUser.fullName, email: newUser.email, phoneNumber: newUser.phoneNumber, userName: newUser.userName, }); users.push({ id: 'f7541155-a4ff-4ca2-bfc5-a82ad98e2e86', fullName: 'Big Pig', email: 'BigPig@local.com', phoneNumber: '0900000000', userName: 'pig pig', }); users.push({ id: '80f78f75-37b5-4977-bffc-5afc5db99123', fullName: 'Pink Chicken', email: 'PinkChicken@local.com', phoneNumber: '0900000011', userName: 'Hi Chicken', }); return users; } /**æ›´æ–°ä½¿ç”¨è€… * * @param id user id * @param oldUser edit user * @param userId update user id * @returns user list */ async updaterUser( id: string, oldUser: UpdateUserDto, userId: string, ): Promise&lt;Array&lt;UserDto&gt;&gt; { let users = new Array&lt;UserDto&gt;(); users.push({ id: 'f7541155-a4ff-4ca2-bfc5-a82ad98e2e86', fullName: oldUser.fullName, email: oldUser.email, phoneNumber: oldUser.phoneNumber, userName: oldUser.fullName, }); users.push({ id: '80f78f75-37b5-4977-bffc-5afc5db99123', fullName: 'Pink Chicken', email: 'PinkChicken@local.com', phoneNumber: '0900000011', userName: 'Hi Chicken', }); return users; } /**åˆªé™¤ä½¿ç”¨è€… * * @param id user id * @returns user list */ async deleteUser(id: string): Promise&lt;Array&lt;UserDto&gt;&gt; { let users = new Array&lt;UserDto&gt;(); users.push({ id: '80f78f75-37b5-4977-bffc-5afc5db99123', fullName: 'Pink Chicken', email: 'PinkChicken@local.com', phoneNumber: '0900000011', userName: 'Hi Chicken', }); return users; } }  ","version":"Next","tagName":"h3"},{"title":"å°‡æœå‹™è¨»å†Šåˆ° moduleâ€‹","type":1,"pageTitle":"ğŸ” å°‡ Service æŠ½è±¡åŒ–","url":"/docs/nest/cerateServiceInterface#å°‡æœå‹™è¨»å†Šåˆ°-module","content":"åˆ° user.module.ts è¨»å†Šæœå‹™ user â””â”€dto â”‚ â””â”€create-user.dto.ts â”‚ â”‚ â”‚ â””â”€update-user.dto.ts â”‚ â”‚ â”‚ â””â”€user.dto.ts â”‚ â”‚ â”‚ â””â”€index.ts â”‚ â””â”€interface â”‚ â””â”€user.service.interface.ts â”‚ â””â”€user.controller.ts â”‚ â””â”€user.service.ts â”‚ â””â”€user.module.ts  import { Module } from '@nestjs/common'; import { UserController } from './user.controller'; import { UserService } from './user.service'; @Module({ controllers: [UserController], providers: [ { provide: 'UserServiceInterface', // æ³¨å…¥æ™‚ tag çš„æ¨™ç±¤ useClass: UserService, // æœå‹™çš„å¯¦é«” }, ], }) export class UserModule {}  ","version":"Next","tagName":"h3"},{"title":"ä¾è³´åè½‰â€‹","type":1,"pageTitle":"ğŸ” å°‡ Service æŠ½è±¡åŒ–","url":"/docs/nest/cerateServiceInterface#ä¾è³´åè½‰","content":"","version":"Next","tagName":"h2"},{"title":"åœ¨ Controller ä¾è³´æŠ½è±¡â€‹","type":1,"pageTitle":"ğŸ” å°‡ Service æŠ½è±¡åŒ–","url":"/docs/nest/cerateServiceInterface#åœ¨-controller-ä¾è³´æŠ½è±¡","content":"ä»¥ä¸‹æ˜¯ä¿®æ”¹å‰çš„ç¨‹å¼ç¢¼ï¼Œ controller æ˜¯ç›´æ¥ä¾è³´ UserService çš„å¯¦é«” @Controller('user') export class UserController { constructor(private readonly userService: UserService) {} }  ä¿®æ”¹å¾Œï¼Œæœƒè®Šæˆ controller ä¾è³´çš„æ˜¯ UserServiceInterface é€™ä»‹é¢ åœ¨é€éæ³¨å…¥æ™‚ï¼Œmodule ä¾†å‘Šè¨´ controller çœŸæ­£æ‡‰è©²ä½¿ç”¨å“ªå€‹å¯¦é«” @Controller('user') export class UserController { constructor( @Inject('UserServiceInterface') private readonly userService: UserServiceInterface, ) {} }   ","version":"Next","tagName":"h3"},{"title":"å®Œæ•´ controller ç¨‹å¼ç¢¼â€‹","type":1,"pageTitle":"ğŸ” å°‡ Service æŠ½è±¡åŒ–","url":"/docs/nest/cerateServiceInterface#å®Œæ•´-controller-ç¨‹å¼ç¢¼","content":"import { Controller, Get, Post, Body, Put, Param, Delete, Inject, } from '@nestjs/common'; import { UpdateUserDto, CreateUserDto, UserDto } from './dto'; import { UserServiceInterface } from './interfaces/user.service.interface'; @Controller('user') export class UserController { constructor( @Inject('UserServiceInterface') private readonly userService: UserServiceInterface, ) {} @Get(':storeId') async findAll(@Param('id') storeId: string): Promise&lt;Array&lt;UserDto&gt;&gt; { return await this.userService.getUserByStoreId(storeId); } @Get(':id') async findOne(@Param('id') id: string): Promise&lt;UserDto&gt; { return await this.userService.getUserById(id); } @Post() async create(@Body() createCatDto: CreateUserDto) { return await this.userService.createUser(createCatDto, ''); } @Put(':id') async update(@Param('id') id: string, @Body() updateCatDto: UpdateUserDto) { return await this.userService.updaterUser(id, updateCatDto, ''); } @Delete(':id') async remove(@Param('id') id: string) { return await this.userService.deleteUser(id); } }   Ref æ¢å¤§å“¥ github ","version":"Next","tagName":"h3"},{"title":"ğŸ” å»ºç«‹ä¸€å€‹æ–°çš„æ¨¡çµ„","type":0,"sectionRef":"#","url":"/docs/nest/createModul","content":"","keywords":"","version":"Next"},{"title":"ç›®éŒ„çµæ§‹â€‹","type":1,"pageTitle":"ğŸ” å»ºç«‹ä¸€å€‹æ–°çš„æ¨¡çµ„","url":"/docs/nest/createModul#ç›®éŒ„çµæ§‹","content":"","version":"Next","tagName":"h2"},{"title":"æ–°å°ˆæ¡ˆç›®éŒ„çµæ§‹â€‹","type":1,"pageTitle":"ğŸ” å»ºç«‹ä¸€å€‹æ–°çš„æ¨¡çµ„","url":"/docs/nest/createModul#æ–°å°ˆæ¡ˆç›®éŒ„çµæ§‹","content":"src â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€main.ts  ","version":"Next","tagName":"h3"},{"title":"å»ºç«‹è³‡æ–™å¤¾â€‹","type":1,"pageTitle":"ğŸ” å»ºç«‹ä¸€å€‹æ–°çš„æ¨¡çµ„","url":"/docs/nest/createModul#å»ºç«‹è³‡æ–™å¤¾","content":"å…ˆå»ºç«‹ä¸€å€‹ user çš„è³‡æ–™å¤¾ src â””â”€user â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€main.ts  ","version":"Next","tagName":"h3"},{"title":"å»ºç«‹ Dtoâ€‹","type":1,"pageTitle":"ğŸ” å»ºç«‹ä¸€å€‹æ–°çš„æ¨¡çµ„","url":"/docs/nest/createModul#å»ºç«‹-dto","content":"Dto çš„å…¨åç‚º data transfer object å®šç¾©è³‡æ–™å‚³è¼¸æ™‚æœƒä½¿ç”¨çš„ç‰©ä»¶ æ³¨æ„: Dto != Entity å…ˆå®šç¾©ä¸€å€‹ä½¿ç”¨è€…çš„ Dto éœ€å°‡æ¯å€‹å±¬æ€§åŠ ä¸Š @ApiProperty() é€™æ¨£ swagger æ‰æœƒé¡¯ç¤º ä¸¦ä¸”å¯ä»¥é‡å° data é€²è¡Œæè¿°èˆ‡é™åˆ¶ å»ºç«‹ä¸€å€‹ dto çš„ç›®éŒ„ï¼Œä¸¦ä¸”å»ºç«‹ä¸€å€‹ create-user.dto.ts çš„æª”æ¡ˆ user â””â”€dto â””â”€create-user.dto.ts  import { ApiProperty } from '@nestjs/swagger'; export class CreateUserDto { @ApiProperty({ description: 'ä½¿ç”¨è€…å…¨å', }) fullName: string; @ApiProperty({ description: 'user email', }) email: string; @ApiProperty({ description: 'user password', }) password: string; @ApiProperty({ description: 'é›»è©±è™Ÿç¢¼', }) phoneNumber: string; @ApiProperty({ description: 'ä½¿ç”¨è€…åç¨±', }) userName: string; }  å»ºç«‹ä¸€å€‹ update-user.dto.ts çš„æª”æ¡ˆ user â””â”€dto â””â”€create-user.dto.ts â”‚ â””â”€update-user.dto.ts  import { ApiProperty } from '@nestjs/swagger'; export class UpdateUserDto { @ApiProperty({ description: 'user id', }) id: string; @ApiProperty({ description: 'ä½¿ç”¨è€…å…¨å', }) fullName: string; @ApiProperty({ description: 'user email', }) email: string; @ApiProperty({ description: 'é›»è©±è™Ÿç¢¼', }) phoneNumber: string; @ApiProperty({ description: 'ä½¿ç”¨è€…åç¨±', }) userName: string; }  å»ºç«‹ä¸€å€‹ user.dto.ts user â””â”€dto â””â”€create-user.dto.ts â”‚ â””â”€update-user.dto.ts â”‚ â””â”€user.dto.ts â”‚ â””â”€index.ts  import { ApiProperty } from &quot;@nestjs/swagger&quot;; export class UserDto { @ApiProperty({ description: 'user id', }) id: string; @ApiProperty({ description: 'ä½¿ç”¨è€…å…¨å', }) fullName: string; @ApiProperty({ description: 'user email', }) email: string; @ApiProperty({ description: 'é›»è©±è™Ÿç¢¼', }) phoneNumber: string; @ApiProperty({ description: 'ä½¿ç”¨è€…åç¨±', }) userName: string; }  å»ºç«‹ä¸€å€‹ index.ts çµ±ä¸€å°‡ class å¾€ä¸Šå±¤æ‹‹ user â””â”€dto â””â”€create-user.dto.ts â”‚ â””â”€update-user.dto.ts â”‚ â””â”€user.dto.ts â”‚ â””â”€index.ts  export * from &quot;./create-user.dto&quot; export * from &quot;./update-user.dto&quot; export * from &quot;./user.dto&quot;  ","version":"Next","tagName":"h3"},{"title":"å»ºç«‹ Serviceâ€‹","type":1,"pageTitle":"ğŸ” å»ºç«‹ä¸€å€‹æ–°çš„æ¨¡çµ„","url":"/docs/nest/createModul#å»ºç«‹-service","content":"ä¸»è¦ç‚ºå•†æ¥­é‚è¼¯å±¤ æ‰€æœ‰çš„æ¥­å‹™é‚è¼¯éƒ½æ‡‰è©²é›†ä¸­åœ¨é€™ä¸€å±¤ å»ºç«‹ user.service.ts user â””â”€dto â”‚ â””â”€create-user.dto.ts â”‚ â”‚ â”‚ â””â”€update-user.dto.ts â”‚ â”‚ â”‚ â””â”€uer.dto.ts â”‚ â”‚ â”‚ â””â”€index.ts â”‚ â””â”€user.service.ts  import { Injectable } from '@nestjs/common'; import { UpdateUserDto, CreateUserDto, UserDto } from './dto'; @Injectable() export class UserService { /** ä½¿ç”¨ store id æŸ¥å‡ºåº•ä¸‹æ‰€æœ‰çš„ä½¿ç”¨è€… * * @param storeId store id * @returns user list */ async getUserByStoreId(storeId: string): Promise&lt;Array&lt;UserDto&gt;&gt; { let users = new Array&lt;UserDto&gt;(); users.push({ id: 'f7541155-a4ff-4ca2-bfc5-a82ad98e2e86', fullName: 'Big Pig', email: 'BigPig@local.com', phoneNumber: '0900000000', userName: 'pig pig', }); users.push({ id: '80f78f75-37b5-4977-bffc-5afc5db99123', fullName: 'Pink Chicken', email: 'PinkChicken@local.com', phoneNumber: '0900000011', userName: 'Hi Chicken', }); return users; } /** ä½¿ç”¨ user id æŸ¥è©¢ä½¿ç”¨è€… * * @param id user id * @returns user */ async getUserById(id: string): Promise&lt;UserDto&gt; { let user: UserDto = { id: '80f78f75-37b5-4977-bffc-5afc5db99123', fullName: 'Pink Chicken', email: 'PinkChicken@local.com', phoneNumber: '0900000011', userName: 'Hi Chicken', }; return user; } /** æ–°å¢ä½¿ç”¨è€… * * @param newUser new user * @returns new user list */ async createUser(newUser: CreateUserDto): Promise&lt;Array&lt;UserDto&gt;&gt; { let users = new Array&lt;UserDto&gt;(); users.push({ id: '591afd77-32d0-44c2-a487-b6bd8850a0fe', fullName: newUser.fullName, email: newUser.email, phoneNumber: newUser.phoneNumber, userName: newUser.userName, }); users.push({ id: 'f7541155-a4ff-4ca2-bfc5-a82ad98e2e86', fullName: 'Big Pig', email: 'BigPig@local.com', phoneNumber: '0900000000', userName: 'pig pig', }); users.push({ id: '80f78f75-37b5-4977-bffc-5afc5db99123', fullName: 'Pink Chicken', email: 'PinkChicken@local.com', phoneNumber: '0900000011', userName: 'Hi Chicken', }); return users; } /**æ›´æ–°ä½¿ç”¨è€… * * @param id user id * @param oldUser edit user * @returns user list */ async updaterUser( id: string, oldUser: UpdateUserDto, ): Promise&lt;Array&lt;UserDto&gt;&gt; { let users = new Array&lt;UserDto&gt;(); users.push({ id: 'f7541155-a4ff-4ca2-bfc5-a82ad98e2e86', fullName: oldUser.fullName, email: oldUser.email, phoneNumber: oldUser.phoneNumber, userName: oldUser.fullName, }); users.push({ id: '80f78f75-37b5-4977-bffc-5afc5db99123', fullName: 'Pink Chicken', email: 'PinkChicken@local.com', phoneNumber: '0900000011', userName: 'Hi Chicken', }); return users; } /**åˆªé™¤ä½¿ç”¨è€… * * @param id user id * @returns user list */ async deleteUser(id: string): Promise&lt;Array&lt;UserDto&gt;&gt; { let users = new Array&lt;UserDto&gt;(); users.push({ id: '80f78f75-37b5-4977-bffc-5afc5db99123', fullName: 'Pink Chicken', email: 'PinkChicken@local.com', phoneNumber: '0900000011', userName: 'Hi Chicken', }); return users; } }  ","version":"Next","tagName":"h3"},{"title":"å»ºç«‹ controllerâ€‹","type":1,"pageTitle":"ğŸ” å»ºç«‹ä¸€å€‹æ–°çš„æ¨¡çµ„","url":"/docs/nest/createModul#å»ºç«‹-controller","content":"é€™é‚Šæ¡ç”¨ RESTful API é¢¨æ ¼ ä¸¦ä¸”ä½œäº†å¢åˆªæŸ¥æ”¹çš„åŠŸèƒ½ åœ¨ user è³‡æ–™å¤¾åº•ä¸‹å»ºç«‹ user.controller.ts æª”æ¡ˆ user â””â”€dto â”‚ â””â”€create-user.dto.ts â”‚ â”‚ â”‚ â””â”€update-user.dto.ts â”‚ â”‚ â”‚ â””â”€user.dto.ts â”‚ â”‚ â”‚ â””â”€index.ts â”‚ â””â”€user.controller.ts â”‚ â””â”€user.service.ts  æœå‹™æ³¨å…¥  constructor(private readonly userService: UserService) {}  æ•´é«”ç¨‹å¼ç¢¼ import { Controller, Get, Post, Body, Put, Param, Delete, } from '@nestjs/common'; import { UpdateUserDto, CreateUserDto, UserDto } from './dto'; import { UserService } from './user.service'; @Controller('user') export class UserController { constructor(private readonly userService: UserService) {} @Get(':storeId') async findAll(@Param('id') storeId: string): Promise&lt;Array&lt;UserDto&gt;&gt; { return await this.userService.getUserByStoreId(storeId); } @Get(':id') async findOne(@Param('id') id: string): Promise&lt;UserDto&gt; { return await this.userService.getUserById(id); } @Post() async create(@Body() createCatDto: CreateUserDto) { return await this.userService.createUser(createCatDto); } @Put(':id') async update(@Param('id') id: string, @Body() updateCatDto: UpdateUserDto) { return await this.userService.updaterUser(id, updateCatDto); } @Delete(':id') async remove(@Param('id') id: string) { return await this.userService.deleteUser(id); } }  ","version":"Next","tagName":"h3"},{"title":"å»ºç½® moduleâ€‹","type":1,"pageTitle":"ğŸ” å»ºç«‹ä¸€å€‹æ–°çš„æ¨¡çµ„","url":"/docs/nest/createModul#å»ºç½®-module","content":"ä¸»è¦ä¾†ç®¡ç† controller, service çš„ç”Ÿé€±æœŸ å»ºç«‹ user.module.ts user â””â”€dto â”‚ â””â”€create-user.dto.ts â”‚ â”‚ â”‚ â””â”€update-user.dto.ts â”‚ â”‚ â”‚ â””â”€user.dto.ts â”‚ â”‚ â”‚ â””â”€index.ts â”‚ â””â”€user.controller.ts â”‚ â””â”€user.service.ts â”‚ â””â”€user.module.ts  import { Module } from '@nestjs/common'; import { UserController } from './user.controller'; import { UserService } from './user.service'; @Module({ controllers: [UserController], providers: [UserService], }) export class UserModule {}  ","version":"Next","tagName":"h3"},{"title":"å°‡ Module è¨»å†Šæ–¼ appâ€‹","type":1,"pageTitle":"ğŸ” å»ºç«‹ä¸€å€‹æ–°çš„æ¨¡çµ„","url":"/docs/nest/createModul#å°‡-module-è¨»å†Šæ–¼-app","content":"åˆ° app.module.ts åŠ å…¥ user.module.ts import { Module } from '@nestjs/common'; import { AppController } from './app.controller'; import { AppService } from './app.service'; import { UserModule } from './user/user.module'; @Module({ imports: [UserModule], controllers: [AppController], providers: [AppService], }) export class AppModule {}  ","version":"Next","tagName":"h3"},{"title":"ğŸ” å…¨åŸŸå·¥å…·åŒ… UUID","type":0,"sectionRef":"#","url":"/docs/nest/createUtail","content":"","keywords":"","version":"Next"},{"title":"é—œæ–¼å…¨åŸŸå·¥å…·åŒ… UUIDâ€‹","type":1,"pageTitle":"ğŸ” å…¨åŸŸå·¥å…·åŒ… UUID","url":"/docs/nest/createUtail#é—œæ–¼å…¨åŸŸå·¥å…·åŒ…-uuid","content":"ç‚ºç”šéº¼è¦ç‰¹åœ°æä¾›ä¸€å€‹ UUID æœå‹™å‘¢? ç‚ºäº†åšæ¸¬è©¦éš”é›¢æœƒæœ‰å¥½å¹¾å€‹æ¨¡çµ„éœ€è¦ä½¿ç”¨åˆ°é€™å€‹åŠŸèƒ½ ","version":"Next","tagName":"h2"},{"title":"è£½ä½œå…¨åŸŸå·¥å…·åŒ… UUIDâ€‹","type":1,"pageTitle":"ğŸ” å…¨åŸŸå·¥å…·åŒ… UUID","url":"/docs/nest/createUtail#è£½ä½œå…¨åŸŸå·¥å…·åŒ…-uuid","content":"å…ˆå»ºç«‹ä¸€å€‹ uuid çš„è³‡æ–™å¤¾ src â””â”€user â”‚ â””â”€uuid â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€main.ts  ","version":"Next","tagName":"h2"},{"title":"å»ºç«‹ interfaceâ€‹","type":1,"pageTitle":"ğŸ” å…¨åŸŸå·¥å…·åŒ… UUID","url":"/docs/nest/createUtail#å»ºç«‹-interface","content":"åœ¨ uuid è³‡æ–™å¤¾åº•ä¸‹ï¼Œå»ºç«‹ä¸€å€‹ uuid.service.interface.ts uuid â””â”€uuid.service.interface.ts  export interface UUIDServiceInterface { /** * å›å‚³ uuid */ getUUID(): string; }  ","version":"Next","tagName":"h3"},{"title":"å»ºç«‹ serviceâ€‹","type":1,"pageTitle":"ğŸ” å…¨åŸŸå·¥å…·åŒ… UUID","url":"/docs/nest/createUtail#å»ºç«‹-service","content":"æ­¤è™•å¯ä»¥ä½¿ç”¨ nest cli ä¾†å»ºç«‹ä¸€å€‹ service nest generate service uuid  uuid â””â”€uuid.service.interface.ts | â””â”€uuid.service.ts | â””â”€uuid.service.spec.ts  uuid.service.spec.ts æ˜¯åœ¨é€²è¡Œæ¸¬è©¦ä½¿ç”¨çš„ import { Injectable } from '@nestjs/common'; import { UUIDServiceInterface } from './uuid.service.interface'; import { v4 as uuidv4 } from 'uuid'; @Injectable() export class UUIDService implements UUIDServiceInterface { /** * å–å¾— uuid */ async getUUID(): Promise&lt;string&gt; { const uuid = uuidv4(); return uuid; } }  ","version":"Next","tagName":"h3"},{"title":"è¨»å†Šæ¨¡çµ„â€‹","type":1,"pageTitle":"ğŸ” å…¨åŸŸå·¥å…·åŒ… UUID","url":"/docs/nest/createUtail#è¨»å†Šæ¨¡çµ„","content":"å…ˆä½¿ç”¨ nest cli å»ºç«‹ä¸€å€‹ uuid.module.ts nest generate module uuid  uuid â””â”€uuid.service.interface.ts | â””â”€uuid.service.ts | â””â”€uuid.module.ts | â””â”€uuid.service.spec.ts  è¨»å†Š uuid æœå‹™ä¸¦ä¸”éœ€è¦åš exports ä¾†ä¸ŠåŒ¯å‡ºæ¨¡çµ„ä½¿ç”¨ @Global() ä¾†è¡¨ç¤ºä»–æ˜¯å…¨åŸŸçš„æ¨¡çµ„ import { Module ,Global } from '@nestjs/common'; import { UUIDService } from './uuid.service'; @Global() @Module({ providers: [ { provide: 'UUIDServiceInterface', useClass: UUIDService, }, ], exports: [ { provide: 'UUIDServiceInterface', useClass: UUIDService, }, ], }) export class UuidModule {}  åˆ° app.module.ts åº•ä¸‹è¨»å†Š UuidModule import { Module } from '@nestjs/common'; import { AppController } from './app.controller'; import { AppService } from './app.service'; import { UserModule } from './user/user.module'; import { UuidModule } from './uuid/uuid.module'; @Module({ imports: [UserModule, UuidModule], controllers: [AppController], providers: [AppService], }) export class AppModule {}   ref æ¢å¤§å“¥ github ","version":"Next","tagName":"h3"},{"title":"ğŸ” å…¨åŸŸå·¥å…·åŒ… TimeZone","type":0,"sectionRef":"#","url":"/docs/nest/dateTimeUtail","content":"","keywords":"","version":"Next"},{"title":"é—œæ–¼å…¨åŸŸå·¥å…·åŒ… TimeZoneâ€‹","type":1,"pageTitle":"ğŸ” å…¨åŸŸå·¥å…·åŒ… TimeZone","url":"/docs/nest/dateTimeUtail#é—œæ–¼å…¨åŸŸå·¥å…·åŒ…-timezone","content":"ç‚ºç”šéº¼è¦ç‰¹åœ°æä¾›ä¸€å€‹ UUID æœå‹™å‘¢? ç‚ºäº†åšæ¸¬è©¦éš”é›¢æœƒæœ‰å¥½å¹¾å€‹æ¨¡çµ„éœ€è¦ä½¿ç”¨åˆ°é€™å€‹åŠŸèƒ½åœ¨é›²ç«¯æœå‹™ä¸­ï¼Œç›´æ¥å– local time æœƒå–åˆ°ä¼ºæœå™¨ç•¶åœ°çš„æ™‚é–“ï¼Œé€ æˆæ™‚é–“ä¸æº–ç¢ºçš„å•é¡Œ ","version":"Next","tagName":"h2"},{"title":"è£½ä½œå…¨åŸŸå·¥å…·åŒ… TimeZoneâ€‹","type":1,"pageTitle":"ğŸ” å…¨åŸŸå·¥å…·åŒ… TimeZone","url":"/docs/nest/dateTimeUtail#è£½ä½œå…¨åŸŸå·¥å…·åŒ…-timezone","content":"å…ˆå»ºç«‹ä¸€å€‹ clock çš„è³‡æ–™å¤¾ src â””â”€user â”‚ â””â”€uuid â”‚ â””â”€clock â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€main.ts  ","version":"Next","tagName":"h2"},{"title":"å»ºç«‹ interfaceâ€‹","type":1,"pageTitle":"ğŸ” å…¨åŸŸå·¥å…·åŒ… TimeZone","url":"/docs/nest/dateTimeUtail#å»ºç«‹-interface","content":"åœ¨ uuid è³‡æ–™å¤¾åº•ä¸‹ï¼Œå»ºç«‹ä¸€å€‹ clock.service.interface.ts clock â””â”€clock.service.interface.ts  export interface ClockServiceInterface{ /** * å–å¾— +8 æ™‚é–“ */ getTime():string; }  ","version":"Next","tagName":"h3"},{"title":"å»ºç«‹ serviceâ€‹","type":1,"pageTitle":"ğŸ” å…¨åŸŸå·¥å…·åŒ… TimeZone","url":"/docs/nest/dateTimeUtail#å»ºç«‹-service","content":"æ­¤è™•å¯ä»¥ä½¿ç”¨ nest cli ä¾†å»ºç«‹ä¸€å€‹ service nest generate service clock  clock â””â”€clock.service.interface.ts | â””â”€clock.service.ts | â””â”€clock.service.spec.ts  clock.service.spec.ts æ˜¯åœ¨é€²è¡Œæ¸¬è©¦ä½¿ç”¨çš„ import { Injectable } from '@nestjs/common'; import { ClockServiceInterface } from './clock.service.interface'; @Injectable() export class ClockService implements ClockServiceInterface { /** * å–å¾—æ¨™æº–æ™‚é–“ * @returns */ private getTimeZone(): Date { const utcTime = new Date().getTime() + new Date().getTimezoneOffset() * 60 * 1000; return new Date(utcTime); } /** * å–å¾— +8 æ™‚é–“ */ getTime(): string { const offset = 8 * 60; // 8å°æ™‚çš„åˆ†é˜æ•¸ const utcTime = this.getTimeZone().getTime(); // ä½¿ç”¨ getTimeZone() å–å¾—æ¨™æº–æ™‚é–“ const localTime = new Date(utcTime + offset * 60 * 1000); return localTime.toISOString(); } }  ","version":"Next","tagName":"h3"},{"title":"è¨»å†Šæ¨¡çµ„â€‹","type":1,"pageTitle":"ğŸ” å…¨åŸŸå·¥å…·åŒ… TimeZone","url":"/docs/nest/dateTimeUtail#è¨»å†Šæ¨¡çµ„","content":"å…ˆä½¿ç”¨ nest cli å»ºç«‹ä¸€å€‹ clock.module.ts nest generate module clock  clock â””â”€clock.service.interface.ts | â””â”€clock.service.ts | â””â”€clock.module.ts | â””â”€clock.service.spec.ts  è¨»å†Š clock æœå‹™ä¸¦ä¸”éœ€è¦åš exports ä¾†ä¸ŠåŒ¯å‡ºæ¨¡çµ„ä½¿ç”¨ @Global() ä¾†è¡¨ç¤ºä»–æ˜¯å…¨åŸŸçš„æ¨¡çµ„ import { Global, Module } from '@nestjs/common'; import { ClockService } from './clock.service'; @Global() @Module({ providers: [ { provide: 'ClockServiceInterface', useClass: ClockService, }, ], exports: [ { provide: 'ClockServiceInterface', useClass: ClockService, }, ], }) export class ClockModule {}  åˆ° app.module.ts åº•ä¸‹è¨»å†Š UuidModule import { Module } from '@nestjs/common'; import { AppController } from './app.controller'; import { AppService } from './app.service'; import { UserModule } from './user/user.module'; import { UuidModule } from './uuid/uuid.module'; import { ClockModule } from './clock/clock.module'; @Module({ imports: [UserModule, UuidModule, ClockModule], controllers: [AppController], providers: [AppService], }) export class AppModule {}  ","version":"Next","tagName":"h3"},{"title":"æ³¨æ„äº‹é …â€‹","type":1,"pageTitle":"ğŸ” å…¨åŸŸå·¥å…·åŒ… TimeZone","url":"/docs/nest/dateTimeUtail#æ³¨æ„äº‹é …","content":"è­¦å‘Š å¦‚æœç›´æ¥å°‡ Date ç‰©ä»¶ï¼Œé€é controller å¸¶çµ¦å®¢æˆ¶ç«¯ï¼Œé‚£éº¼å®¢æˆ¶ç«¯æ‹¿åˆ°çš„æœƒæ˜¯æ ¼æ—å¨æ²»æ™‚é–“ï¼Œ æ‰€ä»¥å¿…é ˆå°‡æ™‚é–“è½‰æ›æˆISO stringæˆ–æ˜¯time stamp ","version":"Next","tagName":"h3"},{"title":"ğŸ” Exception filter","type":0,"sectionRef":"#","url":"/docs/nest/exceptionFilter","content":"","keywords":"","version":"Next"},{"title":"å®šç¾©â€‹","type":1,"pageTitle":"ğŸ” Exception filter","url":"/docs/nest/exceptionFilter#å®šç¾©","content":"","version":"Next","tagName":"h2"},{"title":"é—œæ–¼ Exceptionâ€‹","type":1,"pageTitle":"ğŸ” Exception filter","url":"/docs/nest/exceptionFilter#é—œæ–¼-exception","content":"exception æŒ‡çš„æ˜¯ç¨‹å¼åŸ·è¡Œéç¨‹ä¸­ï¼Œç™¼ç”Ÿçš„ä¾‹å¤–ç‹€æ³ å°è‡´ç¨‹å¼æ²’è¾¦æ³•æ­£ç¢ºçš„åŸ·è¡Œ ","version":"Next","tagName":"h3"},{"title":"é—œæ–¼ filterâ€‹","type":1,"pageTitle":"ğŸ” Exception filter","url":"/docs/nest/exceptionFilter#é—œæ–¼-filter","content":"filter çš„ç”Ÿå‘½é€±æœŸæœƒæ˜¯ï¼Œåœ¨å®¢æˆ¶ç«¯ API ç™¼é€å¾Œï¼Œå…ˆæŠµé” controllerï¼Œæ¥ä¸‹ä¾†æ‰æœƒå›åˆ° filter ","version":"Next","tagName":"h3"},{"title":"é—œæ–¼ Exception filterâ€‹","type":1,"pageTitle":"ğŸ” Exception filter","url":"/docs/nest/exceptionFilter#é—œæ–¼-exception-filter","content":"å°‡å‰é¢çš„åè©åˆä½µ Exception + filter é€™é‚Šçš„ç”¨é€”æ˜¯å…¨åŸŸä¾‹å¤–æ””æˆªå™¨ï¼Œæ•´å€‹ç³»çµ±çš„ä¾‹å¤–éƒ½æœƒè¢«é€™é‚Šæ””æˆªï¼Œä¸¦ä¸”é€²è¡Œè™•ç† ","version":"Next","tagName":"h3"},{"title":"å¯¦ä½œ Exception filterâ€‹","type":1,"pageTitle":"ğŸ” Exception filter","url":"/docs/nest/exceptionFilter#å¯¦ä½œ-exception-filter","content":"","version":"Next","tagName":"h2"},{"title":"å»ºç«‹ç›®æª”æ¡ˆâ€‹","type":1,"pageTitle":"ğŸ” Exception filter","url":"/docs/nest/exceptionFilter#å»ºç«‹ç›®æª”æ¡ˆ","content":"å»ºç«‹ all-exceptions.filter.ts src â””â”€user â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€all-exceptions.filter.ts â”‚ â””â”€app.service.ts â”‚ â””â”€main.ts  ","version":"Next","tagName":"h3"},{"title":"å»ºç«‹å…¨åŸŸéæ¿¾å™¨â€‹","type":1,"pageTitle":"ğŸ” Exception filter","url":"/docs/nest/exceptionFilter#å»ºç«‹å…¨åŸŸéæ¿¾å™¨","content":"åœ¨å…¨åŸŸéæ¿¾å™¨ä¸­ï¼Œä¹Ÿè‡ªå®šç¾©äº†ä¾‹å¤–æ‹¾å›å‚³çš„æ ¼å¼ import { ExceptionFilter, Catch, ArgumentsHost, HttpException, HttpStatus, } from '@nestjs/common'; import { HttpAdapterHost } from '@nestjs/core'; @Catch() export class AllExceptionsFilter implements ExceptionFilter { constructor(private readonly httpAdapterHost: HttpAdapterHost) { } catch(exception: unknown, host: ArgumentsHost): void { // In certain situations `httpAdapter` might not be available in the // constructor method, thus we should resolve it here. const { httpAdapter } = this.httpAdapterHost; const ctx = host.switchToHttp(); const msg = exception instanceof Error ? exception.message : 'unknown message'; const httpStatus = exception instanceof HttpException ? exception.getStatus() : HttpStatus.INTERNAL_SERVER_ERROR; const responseBody = { statusCode: httpStatus, msg: msg, timestamp: new Date().toISOString(), path: httpAdapter.getRequestUrl(ctx.getRequest()), }; httpAdapter.reply(ctx.getResponse(), responseBody, httpStatus); } }  ","version":"Next","tagName":"h3"},{"title":"è¨»å†Šå…¨åŸŸçš„éæ¿¾å™¨â€‹","type":1,"pageTitle":"ğŸ” Exception filter","url":"/docs/nest/exceptionFilter#è¨»å†Šå…¨åŸŸçš„éæ¿¾å™¨","content":"æ–¼ app.module.ts è¨»å†Š @Module({ imports: [ InhabitantModule, ], controllers: [AppController], providers: [AppService, { provide: APP_FILTER, useClass: AllExceptionsFilter, } ], }) export class AppModule { }  ","version":"Next","tagName":"h3"},{"title":"ğŸ” Multi-stage Build","type":0,"sectionRef":"#","url":"/docs/nest/multiStageBuild","content":"","keywords":"","version":"Next"},{"title":"ç‚ºä½•è¦ä½¿ç”¨ Multi-stage Buildâ€‹","type":1,"pageTitle":"ğŸ” Multi-stage Build","url":"/docs/nest/multiStageBuild#ç‚ºä½•è¦ä½¿ç”¨-multi-stage-build","content":"åœ¨ç›´æ¥å»ºç«‹ nest çš„ docker image æ™‚ï¼Œ image è‡³å°‘æœƒ 400 å¤š mbï¼Œå¦‚æœè¦é€²è¡Œç˜¦èº«æ‰“åŒ…é‚£å‹¢å¿…éœ€è¦åŸ·è¡Œæ­¤å‹•ä½œ ","version":"Next","tagName":"h2"},{"title":"è©¦åš nest Multi-stage Buildâ€‹","type":1,"pageTitle":"ğŸ” Multi-stage Build","url":"/docs/nest/multiStageBuild#è©¦åš-nest-multi-stage-build","content":"","version":"Next","tagName":"h2"},{"title":"dockerfileâ€‹","type":1,"pageTitle":"ğŸ” Multi-stage Build","url":"/docs/nest/multiStageBuild#dockerfile","content":"æ­¤æ­¥é©Ÿæ˜¯å…ˆä½¿ç”¨é–‹ç™¼ç’°å¢ƒé€²è¡Œæ‰“åŒ…ï¼Œæ¥ä¸‹ä¾†ä¾é  pnpm ä¾†å®‰è£ç”Ÿç”¢ç’°å¢ƒæ‰€éœ€è¦ç”¨åˆ°çš„ä¾è³´ # development image FROM node:alpine AS development # å»ºç«‹appç›®éŒ„ WORKDIR /usr/src/app # è¤‡è£½ä¾è³´æª” COPY package*.json ./ COPY tsconfig*.json ./ # ä¸‹è¼‰ pnpm RUN npm i -g pnpm # è¤‡è£½ç¨‹å¼ç¢¼ COPY . . /usr/src/app/ # ä¸‹è¼‰ä¾è³´ RUN pnpm install -r # éƒ¨å±¬å°ˆæ¡ˆ RUN pnpm run build # production image FROM node:alpine AS production # å»ºç«‹appç›®éŒ„ WORKDIR /usr/src/app # è¤‡è£½ä¾è³´æª” COPY package.json ./ COPY pnpm-lock.yaml ./ # ä¸‹è¼‰ pnpm RUN npm i -g pnpm # ä¸‹è¼‰ä¾è³´(åªä¸‹è¼‰éœ€ä½¿ç”¨çš„ä¾è³´) RUN pnpm install --prod # è¤‡è£½å‰›å‰›æ‰“åŒ…çš„æª”æ¡ˆ COPY --from=development /usr/src/app/dist ./dist # å•Ÿå‹•æœå‹™ CMD [ &quot;node&quot;, &quot;dist/main.js&quot; ]   ref: Multi-stage Build, Miles æ¢å¤§å“¥ github ","version":"Next","tagName":"h3"},{"title":"ğŸ” Nest CLI å¸¸ç”¨æŒ‡ä»¤","type":0,"sectionRef":"#","url":"/docs/nest/nestCliCmd","content":"","keywords":"","version":"Next"},{"title":"å»ºç«‹ projectâ€‹","type":1,"pageTitle":"ğŸ” Nest CLI å¸¸ç”¨æŒ‡ä»¤","url":"/docs/nest/nestCliCmd#å»ºç«‹-project","content":"nest new [project-name]  ","version":"Next","tagName":"h2"},{"title":"å»ºç«‹ controllerâ€‹","type":1,"pageTitle":"ğŸ” Nest CLI å¸¸ç”¨æŒ‡ä»¤","url":"/docs/nest/nestCliCmd#å»ºç«‹-controller","content":"nest generate controller [module name]  ","version":"Next","tagName":"h2"},{"title":"å»ºç«‹ serviceâ€‹","type":1,"pageTitle":"ğŸ” Nest CLI å¸¸ç”¨æŒ‡ä»¤","url":"/docs/nest/nestCliCmd#å»ºç«‹-service","content":"nest generate service [module name]  ","version":"Next","tagName":"h2"},{"title":"å»ºç«‹ moduleâ€‹","type":1,"pageTitle":"ğŸ” Nest CLI å¸¸ç”¨æŒ‡ä»¤","url":"/docs/nest/nestCliCmd#å»ºç«‹-module","content":"nest generate module [module name]  ","version":"Next","tagName":"h2"},{"title":"ç¸®å¯«â€‹","type":1,"pageTitle":"ğŸ” Nest CLI å¸¸ç”¨æŒ‡ä»¤","url":"/docs/nest/nestCliCmd#ç¸®å¯«","content":"nest generate ç¸®å¯« nest g  ","version":"Next","tagName":"h3"},{"title":"ğŸ” NestJS è¨­å®šå•Ÿå‹• Port","type":0,"sectionRef":"#","url":"/docs/nest/nestStartPort","content":"ğŸ” NestJS è¨­å®šå•Ÿå‹• Port æ–¼æª”æ¡ˆ src/main.ts import { NestFactory } from '@nestjs/core'; import { AppModule } from './app.module'; async function bootstrap() { const app = await NestFactory.create(AppModule); await app.listen(3050); } bootstrap(); ","keywords":"","version":"Next"},{"title":"ğŸ” NestJS çš„ Docker Compose","type":0,"sectionRef":"#","url":"/docs/nest/useDockerCompose","content":"","keywords":"","version":"Next"},{"title":"ç’°å¢ƒâ€‹","type":1,"pageTitle":"ğŸ” NestJS çš„ Docker Compose","url":"/docs/nest/useDockerCompose#ç’°å¢ƒ","content":"NestJsPostgresql ","version":"Next","tagName":"h2"},{"title":"Docker Compose æº–å‚™â€‹","type":1,"pageTitle":"ğŸ” NestJS çš„ Docker Compose","url":"/docs/nest/useDockerCompose#docker-compose-æº–å‚™","content":"","version":"Next","tagName":"h2"},{"title":"æ’°å¯« dockerfileâ€‹","type":1,"pageTitle":"ğŸ” NestJS çš„ Docker Compose","url":"/docs/nest/useDockerCompose#æ’°å¯«-dockerfile","content":"åƒè€ƒ ğŸ” NestJS çš„ dockerfile æ’°å¯« dockerfile ","version":"Next","tagName":"h3"},{"title":"æ’°å¯« docker-compose.ymlâ€‹","type":1,"pageTitle":"ğŸ” NestJS çš„ Docker Compose","url":"/docs/nest/useDockerCompose#æ’°å¯«-docker-composeyml","content":"åœ¨å°ˆæ¡ˆåº•ä¸‹å»ºç«‹ docker-compose.yml version: '3.8' services: nest-app: container_name: nest-app build: context: . dockerfile: Dockerfile ports: - &quot;80:3050&quot; depends_on: - postgres environment: POSTGRES_HOST: postgres POSTGRES_PORT: 5432 POSTGRES_USER: postgres POSTGRES_PASSWORD: test123 POSTGRES_DB: [your_database_name] postgres: container_name: postgres12 image: postgres:12.3 environment: POSTGRES_PASSWORD: test123 ports: - &quot;5432:5432&quot;  ","version":"Next","tagName":"h3"},{"title":"å•Ÿå‹•â€‹","type":1,"pageTitle":"ğŸ” NestJS çš„ Docker Compose","url":"/docs/nest/useDockerCompose#å•Ÿå‹•","content":"docker-compose up  ","version":"Next","tagName":"h3"},{"title":"ğŸ” NestJS çš„ dockerfile","type":0,"sectionRef":"#","url":"/docs/nest/writeDockerfile","content":"","keywords":"","version":"Next"},{"title":"å»ºç«‹æª”æ¡ˆâ€‹","type":1,"pageTitle":"ğŸ” NestJS çš„ dockerfile","url":"/docs/nest/writeDockerfile#å»ºç«‹æª”æ¡ˆ","content":"åœ¨å°ˆæ¡ˆåº•ä¸‹å»ºç«‹ä¸€å€‹æª”æ¡ˆ dockerfile # node image FROM node:18-alpine # å»ºç«‹appç›®éŒ„ WORKDIR /usr/src/app # è¤‡è£½ä¾è³´æª” COPY package*.json ./ COPY tsconfig*.json ./ # è¤‡è£½ç¨‹å¼ç¢¼ COPY . . # ä¸‹è¼‰ä¾è³´ RUN npm install # éƒ¨å±¬å°ˆæ¡ˆ RUN npm run build # å•Ÿå‹•æœå‹™ CMD [ &quot;node&quot;, &quot;dist/main.js&quot; ]  åœ¨å°ˆæ¡ˆåº•ä¸‹å»ºç«‹ä¸€å€‹æª”æ¡ˆ .dockerignoreï¼Œä¾†éæ¿¾ç”¨ä¸åˆ°çš„æª”æ¡ˆ dockerfile .dockerignore node_modules npm-debug.log dist  ","version":"Next","tagName":"h2"},{"title":"å»ºç«‹ imageâ€‹","type":1,"pageTitle":"ğŸ” NestJS çš„ dockerfile","url":"/docs/nest/writeDockerfile#å»ºç«‹-image","content":"docker build -t nest-app .  ","version":"Next","tagName":"h2"},{"title":"å•Ÿå‹• nest å®¹å™¨â€‹","type":1,"pageTitle":"ğŸ” NestJS çš„ dockerfile","url":"/docs/nest/writeDockerfile#å•Ÿå‹•-nest-å®¹å™¨","content":"docker run -p 80:3050 nest-app  ","version":"Next","tagName":"h2"},{"title":"ğŸ” ç†è§£ Nest çš„å–®å…ƒæ¸¬è©¦","type":0,"sectionRef":"#","url":"/docs/test/unitTest","content":"","keywords":"","version":"Next"},{"title":"é—œæ–¼å–®å…ƒæ¸¬è©¦â€‹","type":1,"pageTitle":"ğŸ” ç†è§£ Nest çš„å–®å…ƒæ¸¬è©¦","url":"/docs/test/unitTest#é—œæ–¼å–®å…ƒæ¸¬è©¦","content":"åœ¨ Nest js ä¸­ï¼Œé è¨­çš„æ¸¬è©¦æ¡†æ¶ç‚º Jest å…¶ä¸­æä¾›äº† æ–·è¨€ã€mock ç­‰ç­‰æ¸¬è©¦åŠŸèƒ½ ","version":"Next","tagName":"h2"},{"title":"å¾å®˜ç¶²ç¯„ä¾‹ç†è§£æ¸¬è©¦ç”Ÿå‘½é€±æœŸâ€‹","type":1,"pageTitle":"ğŸ” ç†è§£ Nest çš„å–®å…ƒæ¸¬è©¦","url":"/docs/test/unitTest#å¾å®˜ç¶²ç¯„ä¾‹ç†è§£æ¸¬è©¦ç”Ÿå‘½é€±æœŸ","content":"","version":"Next","tagName":"h2"},{"title":"ç¯„ä¾‹ç¨‹å¼â€‹","type":1,"pageTitle":"ğŸ” ç†è§£ Nest çš„å–®å…ƒæ¸¬è©¦","url":"/docs/test/unitTest#ç¯„ä¾‹ç¨‹å¼","content":"import { CatsController } from './cats.controller'; import { CatsService } from './cats.service'; describe('CatsController', () =&gt; { let catsController: CatsController; let catsService: CatsService; beforeEach(() =&gt; { catsService = new CatsService(); catsController = new CatsController(catsService); }); describe('findAll', () =&gt; { it('should return an array of cats', async () =&gt; { const result = ['test']; jest.spyOn(catsService, 'findAll').mockImplementation(() =&gt; result); expect(await catsController.findAll()).toBe(result); }); }); });  ","version":"Next","tagName":"h3"},{"title":"ç”Ÿå‘½é€±æœŸ-importâ€‹","type":1,"pageTitle":"ğŸ” ç†è§£ Nest çš„å–®å…ƒæ¸¬è©¦","url":"/docs/test/unitTest#ç”Ÿå‘½é€±æœŸ-import","content":"CatsController å’Œ CatsService çš„åŒ¯å…¥ï¼šç¨‹å¼ç¢¼é–‹é ­åŒ¯å…¥æ˜¯è¢«æ¸¬è©¦çš„æ§åˆ¶å™¨å’Œæœå‹™ import { CatsController } from './cats.controller'; import { CatsService } from './cats.service';  ","version":"Next","tagName":"h3"},{"title":"ç”Ÿå‘½é€±æœŸ-describe for classâ€‹","type":1,"pageTitle":"ğŸ” ç†è§£ Nest çš„å–®å…ƒæ¸¬è©¦","url":"/docs/test/unitTest#ç”Ÿå‘½é€±æœŸ-describe-for-class","content":"describeï¼šé€™æ˜¯ Jest æ¸¬è©¦æ¡†æ¶ä¸­çš„å‡½å¼ï¼Œç”¨ä¾†å®šç¾©ä¸€å€‹æ¸¬è©¦å¥—ä»¶ï¼Œé€™å€‹å¥—ä»¶å°ˆé–€ç”¨ä¾†æ¸¬è©¦ CatsController é¡åˆ¥ describe('CatsController', () =&gt; { });  ","version":"Next","tagName":"h3"},{"title":"ç”Ÿå‘½é€±æœŸ-beforeEachâ€‹","type":1,"pageTitle":"ğŸ” ç†è§£ Nest çš„å–®å…ƒæ¸¬è©¦","url":"/docs/test/unitTest#ç”Ÿå‘½é€±æœŸ-beforeeach","content":"beforeEachï¼šåœ¨æ¯å€‹æ¸¬è©¦æ¡ˆä¾‹åŸ·è¡Œä¹‹å‰ï¼ŒbeforeEach å‡½å¼æœƒè¢«åŸ·è¡Œ åœ¨é€™å€‹å€å¡Šä¸­ï¼Œæˆ‘å€‘å»ºç«‹äº†ä¸€å€‹æ–°çš„ CatsService å¯¦ä¾‹ï¼Œä¸¦æ³¨å…¥åˆ°ä¸€å€‹æ–°çš„ CatsController å¯¦ä¾‹ä¸­  let catsController: CatsController; let catsService: CatsService; beforeEach(() =&gt; { catsService = new CatsService(); catsController = new CatsController(catsService); });  ","version":"Next","tagName":"h3"},{"title":"ç”Ÿå‘½é€±æœŸ-describe for functionâ€‹","type":1,"pageTitle":"ğŸ” ç†è§£ Nest çš„å–®å…ƒæ¸¬è©¦","url":"/docs/test/unitTest#ç”Ÿå‘½é€±æœŸ-describe-for-function","content":"describe('findAll', ...)ï¼šç”¨å®ƒä¾†å®šç¾©æˆ‘è¦æ¸¬è©¦çš„å‡½å¼  describe('findAll', () =&gt; { });  ","version":"Next","tagName":"h3"},{"title":"ç”Ÿå‘½é€±æœŸ-itâ€‹","type":1,"pageTitle":"ğŸ” ç†è§£ Nest çš„å–®å…ƒæ¸¬è©¦","url":"/docs/test/unitTest#ç”Ÿå‘½é€±æœŸ-it","content":"itï¼šä»–çš„å–®ä½ç‚ºä¸€å€‹æ¸¬è©¦æ¡ˆä¾‹(test case) it('should return an array of cats', async () =&gt; { });  ","version":"Next","tagName":"h3"},{"title":"ç”Ÿå‘½é€±æœŸ-jest.spyOnâ€‹","type":1,"pageTitle":"ğŸ” ç†è§£ Nest çš„å–®å…ƒæ¸¬è©¦","url":"/docs/test/unitTest#ç”Ÿå‘½é€±æœŸ-jestspyon","content":"jest.spyOnï¼šé€™æ˜¯ä¸€å€‹ mockï¼Œç”¨ä¾†åšå‡ç‰©ä»¶ï¼Œé›¢æ‰çœŸå¯¦ç‰©ä»¶çš„ç›¸ä¾æ€§(åªå°ˆæ³¨åœ¨è©²å…§éƒ¨é‚è¼¯ï¼Œå¤–éƒ¨éƒ½åšéš”é›¢) åœ¨é€™é‚Šé è¨­ï¼ŒcatsService çš„ findAll æœƒå›å‚³ ['test'] const result = ['test']; jest.spyOn(catsService, 'findAll').mockImplementation(() =&gt; result);  ","version":"Next","tagName":"h3"},{"title":"ç”Ÿå‘½é€±æœŸ-expectâ€‹","type":1,"pageTitle":"ğŸ” ç†è§£ Nest çš„å–®å…ƒæ¸¬è©¦","url":"/docs/test/unitTest#ç”Ÿå‘½é€±æœŸ-expect","content":"expectï¼šé€™æ˜¯æ–·è¨€èªå¥ï¼Œå®ƒé©—è­‰å‘¼å« catsController.findAll() æ–¹æ³•çš„çµæœæ˜¯å¦ç­‰æ–¼æˆ‘å€‘é æœŸçš„ result const result = ['test']; jest.spyOn(catsService, 'findAll').mockImplementation(() =&gt; result); expect(await catsController.findAll()).toBe(result);  ç¶“éä»¥ä¸Šæ­¥é©Ÿå°±å®Œæˆä¸€å€‹å–®å…ƒæ¸¬è©¦çš„ç¨‹å¼ ","version":"Next","tagName":"h3"},{"title":"åè©å›é¡§â€‹","type":1,"pageTitle":"ğŸ” ç†è§£ Nest çš„å–®å…ƒæ¸¬è©¦","url":"/docs/test/unitTest#åè©å›é¡§","content":"åè©\tNUnit åè©å°ç…§\tèªªæ˜describe (for class)\tTestFixture\tæ¨™ç¤ºç‚ºæ¸¬è©¦é¡åˆ¥ beforeEach\tSetUp\tæ¨™ç¤ºç‚ºåˆå§‹åŒ– describe (for function)\tTest or TestCase\tæ¨™ç¤ºæ¸¬è©¦çš„å‡½å¼ it\tTest or TestCase\tæ¸¬è©¦æ¡ˆä¾‹ jest.spyOn\tNSubstitute.Substitute\tmockï¼Œç”¨ä¾†åšå‡ç‰©ä»¶ï¼Œé›¢æ‰çœŸå¯¦ç‰©ä»¶çš„ç›¸ä¾æ€§ expect\tAssert\tæ–·è¨€  ref æ¢å¤§å“¥è§£èªª ","version":"Next","tagName":"h2"},{"title":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","type":0,"sectionRef":"#","url":"/docs/test/createUnitTest","content":"","keywords":"","version":"Next"},{"title":"éœ€æ±‚â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#éœ€æ±‚","content":"æˆ‘éœ€è¦ä¸€å€‹æª¢æŸ¥ç‰©ä»¶çš„æœå‹™å¦‚æœç‰©ä»¶æ˜¯å­—ä¸²ï¼Œå°±éœ€è¦æª¢æŸ¥å®ƒæ˜¯å¦ç‚ºç©ºå­—ä¸²å¦‚æœç‰©ä»¶æ˜¯æ•¸å­—ï¼Œå°±è¦æª¢æŸ¥å®ƒæ˜¯ä¸æ˜¯ NaNå¦‚æœæœ‰éŒ¯èª¤çš„è©±éƒ½è¦ä¸Šæ‹‹ä¾‹å¤– ","version":"Next","tagName":"h2"},{"title":"å¯¦ä½œå–®å…ƒæ¸¬è©¦â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#å¯¦ä½œå–®å…ƒæ¸¬è©¦","content":"src â””â”€user â”‚ â””â”€uuid â”‚ â””â”€error-check â”‚ â””â”€clock â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€main.ts  ","version":"Next","tagName":"h2"},{"title":"å®šç¾©æœå‹™æœƒæä¾›çš„ä»‹é¢â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#å®šç¾©æœå‹™æœƒæä¾›çš„ä»‹é¢","content":"å»ºç«‹ä¸€å€‹ error-check.service.interface.tså…ˆæƒ³å¥½è¦æä¾›ä»€éº¼è¦çš„ input èˆ‡ output error-check â””â”€error-check.service.interface.ts  export interface ErrorCheckServiceInterface { /** * æª¢æŸ¥å­—ä¸²æ˜¯å¦ç‚ºç©º * @param str */ isNullOrEmpty(str: string): boolean; /** * æª¢æŸ¥è³‡æ–™æ˜¯å¦ç‚ºç©º * @param dataName è³‡æ–™åç¨± * @param data éœ€è¦è¢«æª¢æŸ¥çš„è³‡æ–™ */ checkOneValue&lt;T&gt;(dataName: string, data: T): void; }  ","version":"Next","tagName":"h3"},{"title":"å»ºç«‹æœå‹™æª”æ¡ˆâ€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#å»ºç«‹æœå‹™æª”æ¡ˆ","content":"å»ºç«‹æœå‹™èˆ‡æ¸¬è©¦ nest generate service error-check  error-check â””â”€error-check.service.interface.ts | â””â”€error-check.service.ts | â””â”€error-check.service.spec.ts  ","version":"Next","tagName":"h3"},{"title":"å…ˆå¯«æ¸¬è©¦â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#å…ˆå¯«æ¸¬è©¦","content":"æ¸¬è©¦çš„æª”æ¡ˆç‚º error-check.service.spec.tså…ˆåšå¥½æ¸¬è©¦çš„å‰ç½®æº–å‚™ import { Test, TestingModule } from '@nestjs/testing'; import { ErrorCheckService } from './error-check.service'; describe('ErrorCheckService', () =&gt; { let errorCheckService: ErrorCheckService; beforeEach(async () =&gt; { // åœ¨å®¹å™¨ä¸­è¨»å†Šæˆ‘è¦åšæ¸¬è©¦çš„æœå‹™ const module: TestingModule = await Test.createTestingModule({ providers: [ErrorCheckService], }).compile(); // å¾å®¹å™¨ä¸­å–å‡ºæˆ‘è¦æ¸¬è©¦çš„æœå‹™ errorCheckService = module.get&lt;ErrorCheckService&gt;(ErrorCheckService); }); });  ","version":"Next","tagName":"h2"},{"title":"éœ€æ±‚1: å¦‚æœç‰©ä»¶æ˜¯å­—ä¸²ï¼Œå°±éœ€è¦æª¢æŸ¥å®ƒæ˜¯å¦ç‚ºç©ºå­—ä¸²â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#éœ€æ±‚1-å¦‚æœç‰©ä»¶æ˜¯å­—ä¸²å°±éœ€è¦æª¢æŸ¥å®ƒæ˜¯å¦ç‚ºç©ºå­—ä¸²","content":"é€™é‚Šæ¸¬è©¦å…©å€‹åŠ‡æƒ… åŠ‡æƒ…1: è³‡æ–™ç‚ºç©ºçš„è©±ï¼Œæˆ‘æ‡‰è©²æœƒæ”¶åˆ°ä¸€å€‹ä¾‹å¤– åŠ‡æƒ…2: è³‡æ–™æ˜¯æ­£å¸¸çš„å­—ä¸²ï¼Œæ‡‰è©²è¦æ­£å¸¸é‹ä½œ  it('should throw an error when given an empty string', () =&gt; { expect(() =&gt; errorCheckService.checkOneValue('data', '')).toThrowError('data,è³‡æ–™ä¸èƒ½ç‚ºç©ºæˆ–æœªå®šç¾©'); }); it('should not throw an error when given a valid string', () =&gt; { // æ‡‰è©²ä¸æœƒæ‹‹å‡ºéŒ¯èª¤ expect(() =&gt; errorCheckService.checkOneValue('data', 'valid')).not.toThrow(); });  ","version":"Next","tagName":"h3"},{"title":"éœ€æ±‚2: å¦‚æœç‰©ä»¶æ˜¯æ•¸å­—ï¼Œå°±è¦æª¢æŸ¥å®ƒæ˜¯ä¸æ˜¯ NaNâ€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#éœ€æ±‚2-å¦‚æœç‰©ä»¶æ˜¯æ•¸å­—å°±è¦æª¢æŸ¥å®ƒæ˜¯ä¸æ˜¯-nan","content":"é€™é‚Šæ¸¬è©¦å…©å€‹åŠ‡æƒ… åŠ‡æƒ…1: è³‡æ–™ç‚º NaN çš„è©±ï¼Œæˆ‘æ‡‰è©²æœƒæ”¶åˆ°ä¸€å€‹ä¾‹å¤– åŠ‡æƒ…2: è³‡æ–™æ˜¯æ­£å¸¸çš„æ•¸å­—ï¼Œæ‡‰è©²è¦æ­£å¸¸é‹ä½œ  it('should throw an error when given NaN', () =&gt; { expect(() =&gt; errorCheckService.checkOneValue('data', NaN)).toThrowError('data,è³‡æ–™ä¸èƒ½ç‚º NaN'); }); it('should not throw an error when given a valid number', () =&gt; { // æ‡‰è©²ä¸æœƒæ‹‹å‡ºéŒ¯èª¤ expect(() =&gt; errorCheckService.checkOneValue('data', 42)).not.toThrow(); });  ","version":"Next","tagName":"h3"},{"title":"éœ€æ±‚3: å¦‚æœæœ‰éŒ¯èª¤çš„è©±éƒ½è¦ä¸Šæ‹‹ä¾‹å¤–â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#éœ€æ±‚3-å¦‚æœæœ‰éŒ¯èª¤çš„è©±éƒ½è¦ä¸Šæ‹‹ä¾‹å¤–","content":"é€™é‚Šæ¸¬è©¦å…©å€‹åŠ‡æƒ… åŠ‡æƒ…1: å¦‚æœè³‡æ–™æ˜¯ undefinedï¼Œå°±è¦è·³å‡º data,è³‡æ–™æœªå®šç¾© çš„ä¾‹å¤– åŠ‡æƒ…2: å¦‚æœè³‡æ–™æ˜¯æ²’æœ‰è¦æª¢æŸ¥çš„å‹åˆ¥ï¼Œå°±è¦è·³å‡º ä¸æ”¯æ´çš„è³‡æ–™å‹åˆ¥ çš„ä¾‹å¤–  it('should throw an error when given undefined data', () =&gt; { expect(() =&gt; errorCheckService.checkOneValue('data', undefined)).toThrowError('data,è³‡æ–™æœªå®šç¾©'); }); it('should throw an error for unsupported data type', () =&gt; { expect(() =&gt; errorCheckService.checkOneValue('data', {})).toThrowError('ä¸æ”¯æ´çš„è³‡æ–™å‹åˆ¥'); });  ","version":"Next","tagName":"h3"},{"title":"å®Œæ•´çš„æ¸¬è©¦ç¨‹å¼ç¢¼â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#å®Œæ•´çš„æ¸¬è©¦ç¨‹å¼ç¢¼","content":"import { Test, TestingModule } from '@nestjs/testing'; import { ErrorCheckService } from './error-check.service'; describe('ErrorCheckService', () =&gt; { let errorCheckService: ErrorCheckService; beforeEach(async () =&gt; { const module: TestingModule = await Test.createTestingModule({ providers: [ErrorCheckService], }).compile(); errorCheckService = module.get&lt;ErrorCheckService&gt;(ErrorCheckService); }); it('should throw an error when given an empty string', () =&gt; { expect(() =&gt; errorCheckService.checkOneValue('data', '')).toThrowError('data,è³‡æ–™ä¸èƒ½ç‚ºç©ºæˆ–æœªå®šç¾©'); }); it('should throw an error when given undefined data', () =&gt; { expect(() =&gt; errorCheckService.checkOneValue('data', undefined)).toThrowError('data,è³‡æ–™æœªå®šç¾©'); }); it('should throw an error when given NaN', () =&gt; { expect(() =&gt; errorCheckService.checkOneValue('data', NaN)).toThrowError('data,è³‡æ–™ä¸èƒ½ç‚º NaN'); }); it('should throw an error for unsupported data type', () =&gt; { expect(() =&gt; errorCheckService.checkOneValue('data', {})).toThrowError('ä¸æ”¯æ´çš„è³‡æ–™å‹åˆ¥'); }); it('should not throw an error when given a valid string', () =&gt; { // æ‡‰è©²ä¸æœƒæ‹‹å‡ºéŒ¯èª¤ expect(() =&gt; errorCheckService.checkOneValue('data', 'valid')).not.toThrow(); }); it('should not throw an error when given a valid number', () =&gt; { // æ‡‰è©²ä¸æœƒæ‹‹å‡ºéŒ¯èª¤ expect(() =&gt; errorCheckService.checkOneValue('data', 42)).not.toThrow(); }); });  ","version":"Next","tagName":"h3"},{"title":"é–‹å§‹å¯«æœå‹™â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#é–‹å§‹å¯«æœå‹™","content":"","version":"Next","tagName":"h2"},{"title":"error-check.service.tsâ€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#error-checkservicets","content":"import { Injectable } from '@nestjs/common'; import { ErrorCheckServiceInterface } from './error-check.service.interface'; @Injectable() export class ErrorCheckService implements ErrorCheckServiceInterface { /** * æª¢æŸ¥å­—ä¸²æ˜¯å¦ç‚ºç©º * @param str */ isNullOrEmpty(str: string): boolean { return !str || str == undefined || str == '' || str.length == 0; } /** * æª¢æŸ¥è³‡æ–™æ˜¯å¦ç‚ºç©º * @param dataName è³‡æ–™åç¨± * @param data éœ€è¦è¢«æª¢æŸ¥çš„è³‡æ–™ */ checkOneValue&lt;T&gt;(dataName: string, data: T): void { switch (typeof data) { case 'string': if (this.isNullOrEmpty(data)) throw new Error(`${dataName},è³‡æ–™ä¸èƒ½ç‚ºç©ºæˆ–æœªå®šç¾©`); break; case 'number': if (isNaN(data)) throw new Error(`${dataName},è³‡æ–™ä¸èƒ½ç‚º NaN`); break; case 'undefined': throw new Error(`${dataName},è³‡æ–™æœªå®šç¾©`); default: throw new Error('ä¸æ”¯æ´çš„è³‡æ–™å‹åˆ¥'); } } }  ","version":"Next","tagName":"h3"},{"title":"è¨»å†Šæœå‹™â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#è¨»å†Šæœå‹™","content":"å…ˆå»ºç«‹ä¸€å€‹ module nest generate module error-check  import { Global, Module } from '@nestjs/common'; import { ErrorCheckService } from './error-check.service'; @Global() @Module({ providers: [ { provide: 'ErrorCheckServiceInterface', useClass: ErrorCheckService, }, ], exports: [ { provide: 'ErrorCheckServiceInterface', useClass: ErrorCheckService, }, ], }) export class ErrorCheckModule {}  app.module.ts import { Module } from '@nestjs/common'; import { AppController } from './app.controller'; import { AppService } from './app.service'; import { UserModule } from './user/user.module'; import { UuidModule } from './uuid/uuid.module'; import { ClockModule } from './clock/clock.module'; import { ErrorCheckModule } from './error-check/error-check.module'; @Module({ imports: [UserModule, UuidModule, ClockModule, ErrorCheckModule], controllers: [AppController], providers: [AppService], }) export class AppModule {}  ","version":"Next","tagName":"h3"},{"title":"é€²è¡Œæ¸¬è©¦â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#é€²è¡Œæ¸¬è©¦","content":"","version":"Next","tagName":"h2"},{"title":"æ¸¬è©¦æŒ‡ä»¤â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#æ¸¬è©¦æŒ‡ä»¤","content":"é€²è¡Œæ‰€æœ‰æ¸¬è©¦ pnpm test  é‡å°æŸå€‹æ¸¬è©¦åŸ·è¡Œ pnpm test:watch src/error-check/error-check.service.spec.ts  æ¸¬è©¦éç¨‹ä¸­å¯ä»¥ä¸‹ä¸­æ–·é» debug pnpm test:debug  ","version":"Next","tagName":"h3"},{"title":"åŸ·è¡Œâ€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#åŸ·è¡Œ","content":"é€™é‚ŠåŸ·è¡Œ pnpm test:watch src/error-check/error-check.service.spec.ts  ","version":"Next","tagName":"h3"},{"title":"æ¸¬è©¦çµæœâ€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦å¯¦ä½œ","url":"/docs/test/createUnitTest#æ¸¬è©¦çµæœ","content":" PASS src/error-check/error-check.service.spec.ts ErrorCheckService âˆš should throw an error when given an empty string (35 ms) âˆš should throw an error when given undefined data (5 ms) âˆš should throw an error when given NaN (3 ms) âˆš should throw an error for unsupported data type (4 ms) âˆš should not throw an error when given a valid string (5 ms) âˆš should not throw an error when given a valid number (3 ms) Waiting for the debugger to disconnect... Waiting for the debugger to disconnect... Waiting for the debugger to disconnect... Waiting for the debugger to disconnect... Test Suites: 1 passed, 1 total Tests: 6 passed, 6 total Snapshots: 0 total Time: 6.617 s  å¯ä»¥çœ‹åˆ°æ¸¬è©¦å¾Œçš„æ•¸æ“šèˆ‡çµæœ ","version":"Next","tagName":"h3"},{"title":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","type":0,"sectionRef":"#","url":"/docs/test/unitTestMock","content":"","keywords":"","version":"Next"},{"title":"é—œæ–¼ mockâ€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#é—œæ–¼-mock","content":"å–®å…ƒæ¸¬è©¦ä¸­é›£å…éœ€è¦åšåˆ°è³‡æ–™éš”é›¢ï¼Œç¢ºä¿æˆ‘æ¯æ¬¡åŸ·è¡Œéƒ½ä¿æŒä¸€è‡´çš„çµæœ mock å°±æ˜¯ä¸å±¬æ–¼é€™å€‹æ¸¬è©¦ç¯„åœå¤–çš„æœå‹™ï¼Œé€²è¡Œè™›æ“¬åŒ– ","version":"Next","tagName":"h2"},{"title":"é€²è¡Œé‚è¼¯æ¸¬è©¦â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#é€²è¡Œé‚è¼¯æ¸¬è©¦","content":"ç›®å‰ç›®éŒ„çµæ§‹ src â””â”€user â”‚ â””â”€uuid â”‚ â””â”€error-check â”‚ â””â”€clock â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€main.ts  ç›®å‰ user è³‡æ–™å¤¾ç›®éŒ„çµæ§‹ user â””â”€dto â”‚ â””â”€create-user.dto.ts â”‚ â”‚ â”‚ â””â”€update-user.dto.ts â”‚ â”‚ â”‚ â””â”€user.dto.ts â”‚ â”‚ â”‚ â””â”€index.ts â”‚ â””â”€interface â”‚ â””â”€user.service.interface.ts â”‚ â””â”€user.controller.ts â”‚ â””â”€user.service.ts â”‚ â””â”€user.module.ts  ","version":"Next","tagName":"h2"},{"title":"æ‹†åˆ†é‚è¼¯å±¤èˆ‡è³‡æ–™å±¤â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#æ‹†åˆ†é‚è¼¯å±¤èˆ‡è³‡æ–™å±¤","content":"æ–°å¢ user.repository.ts èˆ‡ user.repository.interface.ts user â””â”€dto â”‚ â””â”€interface â”‚ â””â”€user.service.interface.ts â”‚ â”‚ â”‚ â””â”€user.repository.interface.ts â”‚ â””â”€user.controller.ts â”‚ â””â”€user.service.ts â”‚ â””â”€user.repository.ts â”‚ â””â”€user.module.ts  å…ˆå®šç¾© ä»‹é¢ import { UpdateUserDto, CreateUserDto, UserDto } from '../dto'; export interface UserRepositoryInterface { /** ä½¿ç”¨ store id æŸ¥å‡ºåº•ä¸‹æ‰€æœ‰çš„ä½¿ç”¨è€… * * @param storeId store id * @returns user list */ getByStoreId(storeId: string): Promise&lt;Array&lt;UserDto&gt;&gt;; /** ä½¿ç”¨ user id æŸ¥è©¢ä½¿ç”¨è€… * * @param id user id * @returns user */ getById(id: string): Promise&lt;UserDto&gt;; /** æ–°å¢ä½¿ç”¨è€… * * @param newUser new user * @param userId update user id * @returns new user list */ createUser(newUser: CreateUserDto, userId: string): Promise&lt;Array&lt;UserDto&gt;&gt;; /**æ›´æ–°ä½¿ç”¨è€… * * @param id user id * @param oldUser edit user * @param userId update user id * @returns user list */ updaterUser( id: string, oldUser: UpdateUserDto, userId: string, ): Promise&lt;Array&lt;UserDto&gt;&gt;; /**åˆªé™¤ä½¿ç”¨è€… * * @param id user id * @returns user list */ deleteUser(id: string): Promise&lt;Array&lt;UserDto&gt;&gt;; }  ","version":"Next","tagName":"h3"},{"title":"è¨»å†Š repositoryâ€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#è¨»å†Š-repository","content":"user.module.ts import { Module } from '@nestjs/common'; import { UserController } from './user.controller'; import { UserService } from './user.service'; import { UserRepository } from './user.repository'; @Module({ controllers: [UserController], providers: [ { provide: 'UserServiceInterface', useClass: UserService, }, { provide: 'UserRepositoryInterface', useClass: UserRepository, }, ], }) export class UserModule {}  ","version":"Next","tagName":"h3"},{"title":"å…ˆå¯«æ¸¬è©¦â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#å…ˆå¯«æ¸¬è©¦","content":"","version":"Next","tagName":"h2"},{"title":"æ¸¬è©¦å‰ç½®â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#æ¸¬è©¦å‰ç½®","content":"å®£å‘Šæœƒç”¨åˆ°çš„æœå‹™ è­¦å‘Š import { ErrorCheckModule } from '../error-check/error-check.module'; ç”±æ–¼è·¯å¾‘ä¸¦æ²’æœ‰è·Ÿ user.service.spec.ts åŒä¸€å±¤ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ ../ å¦å‰‡æ¸¬è©¦é‹è¡Œæ™‚æœƒåƒä¸åˆ°æª”æ¡ˆ import { Test, TestingModule } from '@nestjs/testing'; import { UserService } from './user.service'; import { UserDto } from './dto'; import { ErrorCheckModule } from '../error-check/error-check.module'; describe('UserService', () =&gt; { let userService: UserService; let users: Array&lt;UserDto&gt;; });  ","version":"Next","tagName":"h3"},{"title":"é€²è¡Œæ¨¡çµ„è¨»å†Šâ€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#é€²è¡Œæ¨¡çµ„è¨»å†Š","content":"å°‡æœ‰ç”¨åˆ°çš„å¤–éƒ¨æœå‹™ ErrorCheckModule, UserRepository é€²è¡Œè¨»å†Š è­¦å‘Š UserRepositoryInterface éœ€è¦ä½¿ç”¨ useValue ä¾†ç‚ºé€™å€‹ä»‹é¢æä¾›å‡ç‰©ä»¶ /** ä¸Šç•¥ */ describe('UserService', () =&gt; { let userService: UserService; let userRepository: UserRepositoryInterface; let errorCheckService: ErrorCheckServiceInterface; beforeEach(async () =&gt; { const module: TestingModule = await Test.createTestingModule({ imports:[ErrorCheckModule], providers: [ UserService, { provide: 'UserRepositoryInterface', useValue: { // åœ¨é€™è£¡æ¨¡æ“¬ UserRepositoryInterface çš„æ–¹æ³• getByStoreId: jest.fn(), getById: jest.fn(), createUser: jest.fn(), updaterUser: jest.fn(), deleteUser: jest.fn(), }, } ], }).compile(); }); });  ","version":"Next","tagName":"h3"},{"title":"å¯¦ä¾‹åŒ–æœå‹™â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#å¯¦ä¾‹åŒ–æœå‹™","content":"å°‡æœå‹™å¾ IOC ä¸­å–å‡ºï¼Œä¸¦è³¦å€¼çµ¦ç‰©ä»¶ /** ä¸Šç•¥ */ describe('UserService', () =&gt; { let userService: UserService; let userRepository: UserRepositoryInterface; let errorCheckService: ErrorCheckServiceInterface; let users: Array&lt;UserDto&gt;; beforeEach(async () =&gt; { const module: TestingModule = await Test.createTestingModule({ imports:[ErrorCheckModule], providers: [ UserService, { provide: 'UserRepositoryInterface', useValue: { // åœ¨é€™è£¡æ¨¡æ“¬ UserRepositoryInterface çš„æ–¹æ³• getByStoreId: jest.fn(), getById: jest.fn(), createUser: jest.fn(), updaterUser: jest.fn(), deleteUser: jest.fn(), }, } ], }).compile(); userService = module.get&lt;UserService&gt;(UserService); }); });  ","version":"Next","tagName":"h3"},{"title":"å‚³å¯«æ¸¬è©¦ç”¨å‡ç‰©ä»¶èˆ‡è³‡æ–™â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#å‚³å¯«æ¸¬è©¦ç”¨å‡ç‰©ä»¶èˆ‡è³‡æ–™","content":"å°‡æœå‹™å¾ IOC ä¸­å–å‡ºï¼Œä¸¦è³¦å€¼çµ¦ç‰©ä»¶ /** ä¸Šç•¥ */ describe('UserService', () =&gt; { let userService: UserService; let users: Array&lt;UserDto&gt;; beforeEach(async () =&gt; { users = new Array&lt;UserDto&gt;(); users.push({ id: 'f7541155-a4ff-4ca2-bfc5-a82ad98e2e86', fullName: 'Big Pig', email: 'BigPig@local.com', phoneNumber: '0900000000', userName: 'pig pig', }); users.push({ id: '80f78f75-37b5-4977-bffc-5afc5db99123', fullName: 'Pink Chicken', email: 'PinkChicken@local.com', phoneNumber: '0900000011', userName: 'Hi Chicken', }); const module: TestingModule = await Test.createTestingModule({ imports:[ErrorCheckModule], providers: [ UserService, { provide: 'UserRepositoryInterface', useValue: { // åœ¨é€™è£¡æ¨¡æ“¬ UserRepositoryInterface çš„æ–¹æ³• getByStoreId: jest.fn((storeId) =&gt; { // åœ¨é€™è£¡æ¨¡æ“¬ getByStoreId æ–¹æ³•çš„è¡Œç‚º if (storeId === 'validStoreId') { return Promise.resolve(users); } else { return Promise.resolve([]); // è¿”å›ä¸€å€‹ç©ºé™£åˆ—ä½œç‚ºæ¨¡æ“¬ } }), getById: jest.fn((id) =&gt; { return Promise.resolve(users.find((x) =&gt; x.id === id)); }), createUser: jest.fn((newUser, userId) =&gt; { users.push({ id: '99999999-37b5-4977-bffc-5afc5db99123', fullName: newUser.fullName, email: newUser.email, phoneNumber: newUser.phoneNumber, userName: newUser.userName, }); return Promise.resolve(users); }), updaterUser: jest.fn((id, oldUser, userId) =&gt; { let data = users.find((x) =&gt; x.id === id); data.fullName = oldUser.fullName; data.email = oldUser.email; data.phoneNumber = oldUser.phoneNumber; data.userName = oldUser.userName; return Promise.resolve(users); }), deleteUser: jest.fn((id) =&gt; { users = users.filter((x) =&gt; x, id !== id); return Promise.resolve(users); }), }, } ], }).compile(); userService = module.get&lt;UserService&gt;(UserService); }); });  ","version":"Next","tagName":"h3"},{"title":"æ’°å¯«æ¸¬è©¦åŠ‡æƒ…â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#æ’°å¯«æ¸¬è©¦åŠ‡æƒ…","content":"","version":"Next","tagName":"h2"},{"title":"éœ€æ±‚: å–å¾—å•†åº—ä½¿ç”¨è€…â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#éœ€æ±‚-å–å¾—å•†åº—ä½¿ç”¨è€…","content":"éœ€æ±‚: æˆ‘éœ€è¦é€éå•†åº— id ä¾†å–å¾—ï¼Œå±¬æ–¼é€™å®¶åº—çš„ä½¿ç”¨è€… æ¸¬è©¦åŠ‡æƒ…1 : å‚³å…¥æ­£ç¢ºçš„å•†åº— idï¼Œå°±å¯ä»¥å¾—åˆ°å±¬æ–¼é€™å®¶åº—çš„ä½¿ç”¨è€… æ¸¬è©¦åŠ‡æƒ…2 : å‚³å…¥ä¸å­˜åœ¨çš„å•†åº— idï¼Œæœƒå¾—åˆ°ä¸€å€‹ç©ºé™£åˆ— æ¸¬è©¦åŠ‡æƒ…3 : å‚³å…¥ç©ºçš„å­—ä¸²ï¼Œæœƒè·³å‡ºä¾‹å¤– æ¸¬è©¦åŠ‡æƒ…4 : å‚³å…¥ç©ºçš„å­—ä¸²ï¼Œæœƒè·³å‡ºä¾‹å¤–  describe('getUserByStoreId', () =&gt; { // case1 it('store id is validStoreId, return users list', async () =&gt; { const storeId = 'validStoreId'; const actual = await userService.getUserByStoreId(storeId); expect(actual).toStrictEqual(users); }); // case2 it('store id is store123, return []', async () =&gt; { const storeId = 'store123'; const actual = await userService.getUserByStoreId(storeId); expect(actual).toStrictEqual([]); }); // case3 it(&quot;store id is '', throw exception data cant not empty&quot;, async () =&gt; { const storeId = ''; const expectedError = new Error('storeId,è³‡æ–™ä¸èƒ½ç‚ºç©ºæˆ–æœªå®šç¾©'); await expect( async () =&gt; await userService.getUserByStoreId(storeId), ).rejects.toThrow(expectedError); }); // case4 it('store id is undefined, throw exception data is undefined', async () =&gt; { const storeId = undefined; const expectedError = new Error('storeId,è³‡æ–™æœªå®šç¾©'); await expect( async () =&gt; await userService.getUserByStoreId(storeId), ).rejects.toThrow(expectedError); }); });  ","version":"Next","tagName":"h3"},{"title":"æ¸¬è©¦ç´°ç¯€â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#æ¸¬è©¦ç´°ç¯€","content":"toStrictEqual : ç”¨ä¾†æ¯”å°é™£åˆ—ï¼Œæ˜¯å¦ç¬¦åˆé æœŸæ¸¬è©¦ä¾‹å¤– å…ˆå®šç¾©ä¾‹å¤–çš„è¨Šæ¯æœƒå›å‚³ä»€éº¼æ¥ä¸‹ä¾†åŸ·è¡Œæ–·è¨€toThrow : ç”¨ä¾†æ¯”å°ä¾‹å¤–è¨Šæ¯æ˜¯å¦ç‚ºé æœŸçµæœ è­¦å‘Š æ¸¬è©¦éç¨‹è¦æ³¨æ„éåŒæ­¥çš„å•é¡Œï¼Œå¦‚æœæ˜¯éåŒæ­¥åŸ·è¡Œï¼Œéœ€è¦é€²è¡Œ await  const expectedError = new Error('storeId,è³‡æ–™ä¸èƒ½ç‚ºç©ºæˆ–æœªå®šç¾©'); await expect( async () =&gt; await userService.getUserByStoreId(storeId), ).rejects.toThrow(expectedError);  è­¦å‘Š ç‚ºä»€éº¼æ¸¬è©¦ä¾‹å¤–çš„ expect(async () =&gt;{...}) éœ€è¦ç”¨åˆ°ç®­é ­å‡½å¼å‘¢? ä¸»è¦çš„åŸå› åœ¨æ–¼ï¼Œæœƒéœ€è¦ç”¨åˆ°ç‰©ä»¶æœ¬èº«çš„ ref ï¼Œæ‰ä¸æœƒå°è‡´ this æŒ‡å‘ caller ","version":"Next","tagName":"h3"},{"title":"åŸ·è¡Œæ¸¬è©¦â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#åŸ·è¡Œæ¸¬è©¦","content":"pnpm test:watch src/user/user.service.spec.ts  ","version":"Next","tagName":"h3"},{"title":"æ¸¬è©¦çµæœâ€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#æ¸¬è©¦çµæœ","content":" PASS src/user/user.service.spec.ts UserService âˆš should be defined (28 ms) getUserByStoreId âˆš store id is validStoreId, return users list (8 ms) âˆš store id is store123, return [] (3 ms) âˆš store id is '', throw exception data cant not empty (15 ms) âˆš store id is undefined, throw exception data is undefined (4 ms) Waiting for the debugger to disconnect... Waiting for the debugger to disconnect... Waiting for the debugger to disconnect... Waiting for the debugger to disconnect... Test Suites: 1 passed, 1 total Tests: 5 passed, 5 total Snapshots: 0 total Time: 5.932 s, estimated 11 s   ","version":"Next","tagName":"h3"},{"title":"å®Œæ•´æ¸¬è©¦ç¨‹å¼ç¢¼â€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#å®Œæ•´æ¸¬è©¦ç¨‹å¼ç¢¼","content":"import { Test, TestingModule } from '@nestjs/testing'; import { UserService } from './user.service'; import { UserDto } from './dto'; import { ErrorCheckModule } from '../error-check/error-check.module'; describe('UserService', () =&gt; { let userService: UserService; let users: Array&lt;UserDto&gt;; beforeEach(async () =&gt; { users = new Array&lt;UserDto&gt;(); users.push({ id: 'f7541155-a4ff-4ca2-bfc5-a82ad98e2e86', fullName: 'Big Pig', email: 'BigPig@local.com', phoneNumber: '0900000000', userName: 'pig pig', }); users.push({ id: '80f78f75-37b5-4977-bffc-5afc5db99123', fullName: 'Pink Chicken', email: 'PinkChicken@local.com', phoneNumber: '0900000011', userName: 'Hi Chicken', }); const module: TestingModule = await Test.createTestingModule({ imports: [ErrorCheckModule], providers: [ UserService, { provide: 'UserRepositoryInterface', useValue: { // åœ¨é€™è£¡æ¨¡æ“¬ UserRepositoryInterface çš„æ–¹æ³• getByStoreId: jest.fn((storeId) =&gt; { // åœ¨é€™è£¡æ¨¡æ“¬ getByStoreId æ–¹æ³•çš„è¡Œç‚º if (storeId === 'validStoreId') { return Promise.resolve(users); } else { return Promise.resolve([]); // è¿”å›ä¸€å€‹ç©ºé™£åˆ—ä½œç‚ºæ¨¡æ“¬ } }), getById: jest.fn((id) =&gt; { return Promise.resolve(users.find((x) =&gt; x.id === id)); }), createUser: jest.fn((newUser, userId) =&gt; { users.push({ id: '99999999-37b5-4977-bffc-5afc5db99123', fullName: newUser.fullName, email: newUser.email, phoneNumber: newUser.phoneNumber, userName: newUser.userName, }); return Promise.resolve(users); }), updaterUser: jest.fn((id, oldUser, userId) =&gt; { const data = users.find((x) =&gt; x.id === id); data.fullName = oldUser.fullName; data.email = oldUser.email; data.phoneNumber = oldUser.phoneNumber; data.userName = oldUser.userName; return Promise.resolve(users); }), deleteUser: jest.fn((id) =&gt; { users = users.filter((x) =&gt; x, id !== id); return Promise.resolve(users); }), }, }, ], }).compile(); userService = module.get&lt;UserService&gt;(UserService); }); it('should be defined', () =&gt; { expect(userService).toBeDefined(); }); describe('getUserByStoreId', () =&gt; { // case1 it('store id is validStoreId, return users list', async () =&gt; { const storeId = 'validStoreId'; const actual = await userService.getUserByStoreId(storeId); expect(actual).toStrictEqual(users); }); // case2 it('store id is store123, return []', async () =&gt; { const storeId = 'store123'; const actual = await userService.getUserByStoreId(storeId); expect(actual).toStrictEqual([]); }); // case3 it(&quot;store id is '', throw exception data cant not empty&quot;, async () =&gt; { const storeId = ''; const expectedError = new Error('storeId,è³‡æ–™ä¸èƒ½ç‚ºç©ºæˆ–æœªå®šç¾©'); await expect( async () =&gt; await userService.getUserByStoreId(storeId), ).rejects.toThrow(expectedError); }); // case4 it('store id is undefined, throw exception data is undefined', async () =&gt; { const storeId = undefined; const expectedError = new Error('storeId,è³‡æ–™æœªå®šç¾©'); await expect( async () =&gt; await userService.getUserByStoreId(storeId), ).rejects.toThrow(expectedError); }); }); });   ","version":"Next","tagName":"h2"},{"title":"REFâ€‹","type":1,"pageTitle":"ğŸ” å–®å…ƒæ¸¬è©¦ mock","url":"/docs/test/unitTestMock#ref","content":"æ¢å¤§å“¥æ•™å­¸ ","version":"Next","tagName":"h2"},{"title":"ğŸ¤ é—œæ–¼å±…æ°‘","type":0,"sectionRef":"#","url":"/docs/townHistory/inhabitant/about","content":"","keywords":"","version":"Next"},{"title":"å±…æ°‘â€‹","type":1,"pageTitle":"ğŸ¤ é—œæ–¼å±…æ°‘","url":"/docs/townHistory/inhabitant/about#å±…æ°‘","content":"å±…æ°‘ç‚ºå°é®çš„æ ¸å¿ƒï¼Œæ‰€æœ‰äº‹ç‰©éƒ½æ˜¯åœç¹è‘—å±…æ°‘ç™¼ç”Ÿçš„ ","version":"Next","tagName":"h2"},{"title":"æ—¥å¸¸ç”Ÿæ´»â€‹","type":1,"pageTitle":"ğŸ¤ é—œæ–¼å±…æ°‘","url":"/docs/townHistory/inhabitant/about#æ—¥å¸¸ç”Ÿæ´»","content":"","version":"Next","tagName":"h2"},{"title":"èº«åˆ†ç·¨è™Ÿâ€‹","type":1,"pageTitle":"ğŸ¤ é—œæ–¼å±…æ°‘","url":"/docs/townHistory/inhabitant/about#èº«åˆ†ç·¨è™Ÿ","content":"å±…æ°‘çš„ id æ˜¯å±…æ°‘çš„è­˜åˆ¥ç·¨è™Ÿ ","version":"Next","tagName":"h3"},{"title":"å…¶ä»–è³‡è¨Šâ€‹","type":1,"pageTitle":"ğŸ¤ é—œæ–¼å±…æ°‘","url":"/docs/townHistory/inhabitant/about#å…¶ä»–è³‡è¨Š","content":"é£¢é¤“: ç•¶é£¢é¤“é™åˆ° 0 æ™‚å°±æœƒæ­»ç¿¹ç¿¹ è·æ¥­: å±…æ°‘å¯åˆ°è·æ¥­å·¥æœƒé¸æ“‡è·æ¥­ å¹´é½¡: æ¯å€‹å±…æ°‘å…¥ä½æ™‚éƒ½æœƒå¾ 0 æ­²ç®—èµ· é›¶ç”¨éŒ¢: ç›®å‰æ‰‹é‚Šçš„ç¾é‡‘ï¼Œå‰›å…¥ä½æ™‚å°é›é®æœƒçµ¦äºˆ 500 æ´¥è²¼ ","version":"Next","tagName":"h3"},{"title":"ğŸ¤ å±…æ°‘æ¨¡çµ„","type":0,"sectionRef":"#","url":"/docs/townHistory/inhabitant/module","content":"","keywords":"","version":"Next"},{"title":"èªªæ˜â€‹","type":1,"pageTitle":"ğŸ¤ å±…æ°‘æ¨¡çµ„","url":"/docs/townHistory/inhabitant/module#èªªæ˜","content":"å±…æ°‘æ¨¡çµ„æœƒæä¾›ï¼Œæ–°ä½æ°‘çš„è¨»å†Š ","version":"Next","tagName":"h2"},{"title":"è³‡æ–™è¡¨â€‹","type":1,"pageTitle":"ğŸ¤ å±…æ°‘æ¨¡çµ„","url":"/docs/townHistory/inhabitant/module#è³‡æ–™è¡¨","content":"inhabitant æ¬„ä½\tå‹æ…‹\tèªªæ˜id\tnvarchar(128)\tå±…æ°‘çš„ç”Ÿåˆ†è­‰ name\tnvarchar(20)\tå±…æ°‘çš„å§“å hungry\tint\tç­‰ç´šç‚º 0 ~ 10 occupation\tnvarchar(10)\téœ€è¦åˆ°è·æ¥­å·¥æœƒé¸æ“‡ age\tint\tå¹´é½¡ å±…æ°‘å…¥ä½æ™‚éƒ½æœƒå¾ 0 æ­²ç®—èµ· money\tint\tç›®å‰æ‰‹é‚Šçš„ç¾é‡‘ ban\tboolean\té©…é™¤å‡ºå¢ƒæˆ–æ˜¯æ­»æ‰çš„å±…æ°‘å°±æœƒè¢«åº§æ¨™ä½ create_time\tdateTime\tå…¥ä½æ™‚é–“ update_time\tdateTime\tè³‡æ–™æ”¹å‹•æ™‚é–“ update_user_id\tnvarchar(128)\tè³‡æ–™ç•°å‹•äºº ","version":"Next","tagName":"h2"},{"title":"æœå‹™â€‹","type":1,"pageTitle":"ğŸ¤ å±…æ°‘æ¨¡çµ„","url":"/docs/townHistory/inhabitant/module#æœå‹™","content":"ç”±é®é•·æˆ–ç›¸é—œäººå£«ä¾†è¾¦ç†å±…æ°‘çš„å…¥é®ç™»è¨˜ ","version":"Next","tagName":"h2"},{"title":"ğŸŒ¦ï¸ é—œæ–¼è‡ªç„¶ç’°å¢ƒ","type":0,"sectionRef":"#","url":"/docs/townHistory/nature/about","content":"","keywords":"","version":"Next"},{"title":"æ™‚é–“â€‹","type":1,"pageTitle":"ğŸŒ¦ï¸ é—œæ–¼è‡ªç„¶ç’°å¢ƒ","url":"/docs/townHistory/nature/about#æ™‚é–“","content":"å°é›é®çš„æ™‚é–“èˆ‡ç¾å¯¦ç”Ÿæ´»æ˜¯ 1:1 çš„ ","version":"Next","tagName":"h2"},{"title":"å¤©æ°£â€‹","type":1,"pageTitle":"ğŸŒ¦ï¸ é—œæ–¼è‡ªç„¶ç’°å¢ƒ","url":"/docs/townHistory/nature/about#å¤©æ°£","content":"å°é›é®æ¯å¤©éƒ½æœƒæœ‰ä¸åŒçš„å¤©æ°£ ","version":"Next","tagName":"h2"},{"title":"è‡ªç„¶è³‡æºâ€‹","type":1,"pageTitle":"ğŸŒ¦ï¸ é—œæ–¼è‡ªç„¶ç’°å¢ƒ","url":"/docs/townHistory/nature/about#è‡ªç„¶è³‡æº","content":"å°é›é®å¯Œå«è¨±å¤šè±å¯Œçš„å¤©ç„¶è³‡æºï¼Œä¾†ä¾›æ‡‰é®æ°‘çš„ç”Ÿæ´» ","version":"Next","tagName":"h2"},{"title":"ğŸ•°ï¸ æ™‚é–“æ¨¡çµ„","type":0,"sectionRef":"#","url":"/docs/townHistory/nature/clockModule","content":"","keywords":"","version":"Next"},{"title":"èªªæ˜â€‹","type":1,"pageTitle":"ğŸ•°ï¸ æ™‚é–“æ¨¡çµ„","url":"/docs/townHistory/nature/clockModule#èªªæ˜","content":"å°é›é®éœ€è¦ä¸€å€‹æ™‚é–“æœå‹™ï¼Œè®“å¤§å®¶é¤Šæˆå®ˆæ™‚çš„ç¿’æ…£ ","version":"Next","tagName":"h2"},{"title":"æœå‹™â€‹","type":1,"pageTitle":"ğŸ•°ï¸ æ™‚é–“æ¨¡çµ„","url":"/docs/townHistory/nature/clockModule#æœå‹™","content":"æä¾›è©¢å•æ™‚é–“æœå‹™ ","version":"Next","tagName":"h2"},{"title":"ğŸ” Entity Auto Load","type":0,"sectionRef":"#","url":"/docs/typeORM/entityAutoload","content":"","keywords":"","version":"Next"},{"title":"TypeORM çš„ Entityâ€‹","type":1,"pageTitle":"ğŸ” Entity Auto Load","url":"/docs/typeORM/entityAutoload#typeorm-çš„-entity","content":"TypeORM æœ‰å…©ç¨®æ¨¡å¼ è‡ªå‹•è¼‰å…¥: TypeORM æœƒè‡ªå‹•æœå°‹éœ€è¦è¨»å†Šçš„æª”æ¡ˆæ‰‹å‹•è¼‰å…¥: é ˆç”±é–‹ç™¼è€…æ±ºå®šæ‡‰è©²è¦è¼‰å…¥é‚£äº› Entity ","version":"Next","tagName":"h2"},{"title":"autoLoadEntities è¨­å®šâ€‹","type":1,"pageTitle":"ğŸ” Entity Auto Load","url":"/docs/typeORM/entityAutoload#autoloadentities-è¨­å®š","content":"","version":"Next","tagName":"h2"},{"title":"app module import è¨­å®šâ€‹","type":1,"pageTitle":"ğŸ” Entity Auto Load","url":"/docs/typeORM/entityAutoload#app-module-import-è¨­å®š","content":"åœ¨ TypeORM çš„ migration è¨­å®šä¸­æœ‰ä¸€å€‹å±¬æ€§ autoLoadEntitiesï¼Œ é€™å±¬æ€§æ±ºå®šæ˜¯å¦è¦è‡ªå‹•è¼‰å…¥ Entity src â””â”€inhabitant â”‚â””â”€inhabitant.entity.ts â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€typeorm.migration.ts â”‚ â””â”€main.ts  TypeOrmModule.forRootAsync({ useFactory(configService: ConfigService) { const IS_DB_SSL_MODE = configService.getOrThrow&lt;boolean&gt;( 'IS_DB_SSL_MODE', false, ); return { ssl: IS_DB_SSL_MODE, // æ˜¯å¦è¦ä½¿ç”¨ ssl é€£ç·šï¼Œä¸€èˆ¬æ­£å¼é€£ç·šæœƒå•Ÿç”¨ extra: { ssl: IS_DB_SSL_MODE ? { rejectUnauthorized: false } : null, poolSize: 5, idleTimeoutMillis: 3600000, }, type: 'postgres', //é€£ç·šè³‡æ–™åº«çš„é¡å‹ url: configService.getOrThrow('DB_URI', ''), synchronize: false, //å¦è‡ªå‹•åŒæ­¥ entity åˆ°è³‡æ–™åº« table autoLoadEntities: true, //æ˜¯å¦è‡ªå‹•è¼‰å…¥ Entity åˆ° forRoot TypeORM, }; }, inject: [ConfigService], }),  ","version":"Next","tagName":"h3"},{"title":"è‡ªå‹•è¼‰å…¥â€‹","type":1,"pageTitle":"ğŸ” Entity Auto Load","url":"/docs/typeORM/entityAutoload#è‡ªå‹•è¼‰å…¥","content":"åœ¨è‡ªå‹•è¼‰å…¥æ¨¡å¼ä¸‹ï¼Œéœ€å®šç¾© Entity æª”æ¡ˆçš„å‘½åè¦å‰‡ï¼Œ åœ¨ entities é€™å±¬æ€§åº•ä¸‹ï¼ŒæŒ‡å®š Entity çš„æª”æ¡ˆï¼Œ é€šå¸¸æœƒå°‡æª”æ¡ˆå®šç¾©æˆ xxx.entity.ts src â””â”€inhabitant â”‚â””â”€inhabitant.entity.ts â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€typeorm.migration.ts â”‚ â””â”€main.ts  config(); const configService = new ConfigService(); const IS_DB_SSL_MODE = configService.getOrThrow&lt;boolean&gt;( 'IS_DB_SSL_MODE', false, ); export default new DataSource({ type: 'postgres', url: configService.get&lt;string&gt;('DB_URI', ''), ssl: IS_DB_SSL_MODE, extra: { ssl: IS_DB_SSL_MODE ? { rejectUnauthorized: false } : null, }, migrations: ['src/migrations/*.ts'], migrationsRun: true, entities: ['**/*.entity.ts'], });  ","version":"Next","tagName":"h3"},{"title":"æ‰‹å‹•è¼‰å…¥â€‹","type":1,"pageTitle":"ğŸ” Entity Auto Load","url":"/docs/typeORM/entityAutoload#æ‰‹å‹•è¼‰å…¥","content":"åœ¨æ‰‹å‹•è¼‰å…¥çš„æ¨¡å¼ä¸‹ï¼Œé–‹æ³•è€…éœ€è¦æ±ºå®šè¦è¼‰å…¥é‚£äº› Entity src â””â”€inhabitant â”‚â””â”€inhabitant.entity.ts â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€typeorm.migration.ts â”‚ â””â”€main.ts  config(); const configService = new ConfigService(); const IS_DB_SSL_MODE = configService.getOrThrow&lt;boolean&gt;( 'IS_DB_SSL_MODE', false, ); export default new DataSource({ type: 'postgres', url: configService.get&lt;string&gt;('DB_URI', ''), ssl: IS_DB_SSL_MODE, extra: { ssl: IS_DB_SSL_MODE ? { rejectUnauthorized: false } : null, }, migrations: ['src/migrations/*.ts'], migrationsRun: true, entities: [InhabitantEntity], });  ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨æ–¹å¼â€‹","type":1,"pageTitle":"ğŸ” Entity Auto Load","url":"/docs/typeORM/entityAutoload#ä½¿ç”¨æ–¹å¼","content":"å¦‚æœè¦ä½¿ç”¨ Entity éœ€åˆ°è©²æ¨¡çµ„çš„ Module å»è¨»å†Š src â””â”€inhabitant â”‚â””â”€inhabitant.entity.ts â”‚â”‚ â”‚â””â”€inhabitant.module.ts â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€typeorm.migration.ts â”‚ â””â”€main.ts  @Module({ imports: [TypeOrmModule.forFeature([InhabitantEntity])], controllers: [InhabitantController], providers: [ { provide: 'InhabitantServiceInterface', useClass: InhabitantService, }, { provide: 'InhabitantRepositoryInterface', useClass: InhabitantRepository, }, ], }) export class InhabitantModule {}   ","version":"Next","tagName":"h2"},{"title":"REFâ€‹","type":1,"pageTitle":"ğŸ” Entity Auto Load","url":"/docs/typeORM/entityAutoload#ref","content":"æ¢è¿ªå“¥ æ•™å­¸ ","version":"Next","tagName":"h2"},{"title":"ğŸ” TypeORM çš„ CRUD","type":0,"sectionRef":"#","url":"/docs/typeORM/aboutCrud","content":"","keywords":"","version":"Next"},{"title":"é—œæ–¼ CRUDâ€‹","type":1,"pageTitle":"ğŸ” TypeORM çš„ CRUD","url":"/docs/typeORM/aboutCrud#é—œæ–¼-crud","content":"åœ¨æ•´å€‹ TypeORM æœ€æ ¸å¿ƒçš„è§€å¿µå°±æ˜¯ CRUD CRUD å‰‡æ˜¯ä¸€å€‹ç¸®å¯«ï¼Œä»£è¡¨äº†ä»¥ä¸‹å››å€‹åŸºæœ¬æ“ä½œï¼š Create (æ–°å¢)ï¼šåœ¨è³‡æ–™åº«ä¸­æ–°å¢è¨˜éŒ„æˆ–è³‡æ–™Read (è®€å–)ï¼šå¾è³‡æ–™åº«ä¸­è®€å–æˆ–æœå°‹è¨˜éŒ„æˆ–è³‡æ–™Update (æ›´æ–°)ï¼šæ›´æ–°ç¾æœ‰è¨˜éŒ„æˆ–è³‡æ–™çš„å…§å®¹Delete (åˆªé™¤)ï¼šå¾è³‡æ–™åº«ä¸­åˆªé™¤ç¾æœ‰çš„è¨˜éŒ„æˆ–è³‡æ–™ ","version":"Next","tagName":"h2"},{"title":"CRUD å¯¦ä½œâ€‹","type":1,"pageTitle":"ğŸ” TypeORM çš„ CRUD","url":"/docs/typeORM/aboutCrud#crud-å¯¦ä½œ","content":"","version":"Next","tagName":"h2"},{"title":"æº–å‚™â€‹","type":1,"pageTitle":"ğŸ” TypeORM çš„ CRUD","url":"/docs/typeORM/aboutCrud#æº–å‚™","content":"æ³¨å…¥ Repository èˆ‡ DataSource constructor( private readonly dataSource: DataSource, @InjectRepository(InhabitantEntity) private readonly inhabitantDao: Repository&lt;InhabitantEntity&gt;, ) {}  å®šç¾© table name èˆ‡ schemaå› ç‚ºåœ¨ CRUD çš„éç¨‹éƒ½æœƒç”¨åˆ°é€™äº›ï¼Œæ‰€ä»¥å°‡ä»–æŠ½é›¢å‡ºä¾†åšæˆç§æœ‰è®Šæ•¸ï¼Œä¿æŒä¸€è‡´æ€§  private readonly _tableName: string = 'inhabitant'; private readonly _schema: string[] = [ 'id', 'name', 'hungry', 'occupation', 'age', 'money', 'ban', 'create_time', 'update_time', 'update_user_id', ];  ","version":"Next","tagName":"h3"},{"title":"Readâ€‹","type":1,"pageTitle":"ğŸ” TypeORM çš„ CRUD","url":"/docs/typeORM/aboutCrud#read","content":"æœå°‹åˆ†ç‚ºå…©ç¨®ï¼Œä¸€ç¨®æ˜¯æœå°‹æ•´å¼µ table çš„è³‡æ–™ ä¸€ç¨®æ˜¯æœ‰æ¢ä»¶çš„æŸ¥è©¢ ä¸¦ä¸”åœ¨æŸ¥è©¢åŠŸèƒ½ä¸Šéƒ½æ˜¯ä½¿ç”¨ Repository&lt;InhabitantEntity&gt; çš„ç‰©ä»¶ æœå°‹å…¨éƒ¨ä½¿ç”¨ find æŸ¥å‡ºä¾†å¾Œæœƒæ˜¯ä¸€å€‹ Array&lt;InhabitantEntity&gt;  async readAll(): Promise&lt;InhabitantDto[]&gt; { const result = await this.inhabitantDao.find(); return result.map((data) =&gt; ({ id: data.id, name: data.name, age: data.age, occupation: data.occupation, })); }  ä»£æ¢ä»¶æŸ¥è©¢ä½¿ç”¨ fineOneä¸¦ä¸”åŠ å…¥ where èªå¥  async readById(id: string): Promise&lt;InhabitantDto&gt; { const result = await this.inhabitantDao.findOne({ where: { id: id, }, }); return { id: result.id, name: result.name, age: result.age, occupation: result.occupation, }; }  ","version":"Next","tagName":"h3"},{"title":"Createâ€‹","type":1,"pageTitle":"ğŸ” TypeORM çš„ CRUD","url":"/docs/typeORM/aboutCrud#create","content":"å»ºç«‹éœ€è¦é€é DataSource é€™å€‹ç‰©ä»¶ä¾†åŸ·è¡Œ  async create(data: InhabitantEntity): Promise&lt;InhabitantDto&gt; { // 1. å…ˆå»ºç«‹ dataSource çš„ç‰©ä»¶ const queryBuilder = this.dataSource .getRepository(InhabitantEntity) .createQueryBuilder(this._tableName); //2. å°‡è³‡æ–™å¯«å…¥ db const result = await queryBuilder .insert() // æ’å…¥è³‡æ–™åº«æ“ä½œ .into(InhabitantEntity) // æ’å…¥åˆ° &quot;InhabitantEntity&quot; è³‡æ–™è¡¨ .values([data]) // æ’å…¥çš„è³‡æ–™ï¼ˆdataï¼‰å€¼ .returning(this._schema) // è¿”å›çš„è³‡æ–™æ¨¡å‹æˆ–çµæ§‹ .updateEntity(true) // æ›´æ–°å¯¦é«”ï¼ˆtrueè¡¨ç¤ºåŸ·è¡Œæ›´æ–°æ“ä½œï¼‰ .execute(); // åŸ·è¡Œæ“ä½œä¸¦ç²å–çµæœ const model = result.raw[0] as InhabitantEntity; return { id: model.id, name: model.name, age: model.age, occupation: model.occupation, }; }  ","version":"Next","tagName":"h3"},{"title":"Updateâ€‹","type":1,"pageTitle":"ğŸ” TypeORM çš„ CRUD","url":"/docs/typeORM/aboutCrud#update","content":"æ›´æ–°è³‡æ–™åº«ï¼Œåˆ†ç‚ºå…©ç¨®ï¼Œä¸€ç¨®æ˜¯è®“ ORM è‡ªè¡Œå»æ–·å®šæ˜¯å¦è¦æ›´æ–° å¦ä¸€ç¨®æ˜¯æŒ‡å®šé€™æ¬¡è¦æ›´æ–°çš„æ¬„ä½ è®“ ORM è‡ªè¡Œåˆ¤æ–·  async update(data: InhabitantEntity): Promise&lt;InhabitantDto&gt; { // 1. å…ˆå»ºç«‹ dataSource çš„ç‰©ä»¶ const queryBuilder = this.dataSource .getRepository(InhabitantEntity) .createQueryBuilder(this._tableName); // 2. å°‡è³‡æ–™å¯«å…¥ dbï¼ˆå°‡è³‡æ–™æ›´æ–°åˆ°è³‡æ–™åº«ä¸­ï¼‰ const result = await queryBuilder .update&lt;InhabitantEntity&gt;(InhabitantEntity, data) // æ›´æ–°è³‡æ–™ .where(this._tableName + '.id = :id', { id }) // æŒ‡å®šæ›´æ–°æ¢ä»¶ï¼ˆæ ¹æ“š idï¼‰ .returning(this._schema) // è¿”å›çš„è³‡æ–™æ¨¡å‹æˆ–çµæ§‹ .updateEntity(true) // æ›´æ–°å¯¦é«”ï¼ˆtrueè¡¨ç¤ºåŸ·è¡Œæ›´æ–°æ“ä½œï¼‰ .execute(); // åŸ·è¡Œæ“ä½œä¸¦ç²å–çµæœ const model = result.raw[0] as InhabitantEntity; return { id: model.id, name: model.name, age: model.age, occupation: model.occupation, }; }  æŒ‡å®šæ›´æ–°æ¬„ä½  async update( data: UpdateInhabitantDto, updateId: string, ): Promise&lt;InhabitantDto&gt; { // 1. å…ˆå»ºç«‹ dataSource çš„ç‰©ä»¶ const queryBuilder = this.dataSource .getRepository(InhabitantEntity) .createQueryBuilder(this._tableName); // 2. å°‡è³‡æ–™å¯«å…¥ dbï¼ˆå°‡è³‡æ–™æ›´æ–°åˆ°è³‡æ–™åº«ä¸­ï¼‰ const result = await queryBuilder .update(this._tableName) // æŒ‡å®šè¦æ›´æ–°çš„è³‡æ–™è¡¨ .set({ name: data.name, // è¨­ç½®æ–°çš„åç¨±ï¼ˆä½¿ç”¨ data.nameï¼‰ update_user_id: updateId, // è¨­ç½®æ›´æ–°ä½¿ç”¨è€…çš„ IDï¼ˆä½¿ç”¨ updateId è®Šæ•¸ï¼‰ }) .where(this._tableName + '.id = :id', { updateId }) // æŒ‡å®šæ›´æ–°æ¢ä»¶ .returning(this._schema) // è¿”å›çš„è³‡æ–™æ¨¡å‹æˆ–çµæ§‹ .updateEntity(true) // æ›´æ–°å¯¦é«”ï¼ˆtrueè¡¨ç¤ºåŸ·è¡Œæ›´æ–°æ“ä½œï¼‰ .execute(); // åŸ·è¡Œæ“ä½œä¸¦ç²å–çµæœ const model = result.raw[0] as InhabitantEntity; return { id: model.id, name: model.name, age: model.age, occupation: model.occupation, }; }  ","version":"Next","tagName":"h3"},{"title":"Deleteâ€‹","type":1,"pageTitle":"ğŸ” TypeORM çš„ CRUD","url":"/docs/typeORM/aboutCrud#delete","content":"æ°¸ä¹…åˆªé™¤è³‡æ–™åº«çš„æ•´ç­†è³‡æ–™  async deleteById(id: string): Promise&lt;InhabitantDto&gt; { // 1. å…ˆå»ºç«‹ dataSource çš„ç‰©ä»¶ const queryBuilder = this.dataSource .getRepository(InhabitantEntity) .createQueryBuilder(this._tableName); // 2. å°‡è³‡æ–™å¯«å…¥ dbï¼ˆå°‡è³‡æ–™æ›´æ–°åˆ°è³‡æ–™åº«ä¸­ï¼‰ const result = await queryBuilder .delete() // åˆªé™¤è³‡æ–™ .where(this._tableName + '.id = :id', { updateId }) // æŒ‡å®šæ›´æ–°æ¢ä»¶ .returning(this._schema) // è¿”å›çš„è³‡æ–™æ¨¡å‹æˆ–çµæ§‹ .execute(); // åŸ·è¡Œæ“ä½œä¸¦ç²å–çµæœ const model = result.raw[0] as InhabitantEntity; return { id: model.id, name: model.name, age: model.age, occupation: model.occupation, }; }   ","version":"Next","tagName":"h3"},{"title":"REFâ€‹","type":1,"pageTitle":"ğŸ” TypeORM çš„ CRUD","url":"/docs/typeORM/aboutCrud#ref","content":"æ¢è¿ªå“¥ æ•™å­¸ ","version":"Next","tagName":"h2"},{"title":"ğŸ” ä½¿ç”¨ TypeORM","type":0,"sectionRef":"#","url":"/docs/typeORM/useTypeorm","content":"","keywords":"","version":"Next"},{"title":"é—œæ–¼â€‹","type":1,"pageTitle":"ğŸ” ä½¿ç”¨ TypeORM","url":"/docs/typeORM/useTypeorm#é—œæ–¼","content":"TypeORM: æ”¯æ´ Typescript å‹åˆ¥å®£å‘Šçš„ Nodejs ORM æ¡†æ¶ ","version":"Next","tagName":"h2"},{"title":"DataSourceâ€‹","type":1,"pageTitle":"ğŸ” ä½¿ç”¨ TypeORM","url":"/docs/typeORM/useTypeorm#datasource","content":"æ˜¯ä¸€å€‹ç”¨ä¾†ç®¡ç†èˆ‡è³‡æ–™åº«é€£ç·šçš„é‡è¦å…ƒä»¶ï¼Œåœ¨æ‡‰ç”¨ç¨‹å¼å•Ÿå‹•æ™‚å»ºç«‹é€£ç·šæ± ï¼Œåœ¨é—œé–‰æ‡‰ç”¨ç¨‹å¼æ™‚é—œé–‰é€£ç·šæ±  åœ¨ Nestjs æ‡‰ç”¨ç¨‹å¼ä¸­ï¼Œé€™äº›å·¥ä½œéƒ½å¯ä»¥ç”±å…ƒä»¶ç®¡ç†å™¨è‡ªå‹•è™•ç†ï¼Œç„¡éœ€æ‰‹å‹•è¨­å®š ","version":"Next","tagName":"h3"},{"title":"Migrationâ€‹","type":1,"pageTitle":"ğŸ” ä½¿ç”¨ TypeORM","url":"/docs/typeORM/useTypeorm#migration","content":"Migration é è¨­å¦‚æœ synchronized è¨­å®šæˆ trueï¼Œå°±æœƒè‡ªå‹•æ›´æ–°è³‡æ–™è¡¨ç‚ºç•¶ä¸‹ Entity æ ¼å¼ï¼Œé©åˆç”¨ä¾†åšè³‡æ–™åº«é·ç§» ","version":"Next","tagName":"h3"},{"title":"ä½¿ç”¨ TypeORMâ€‹","type":1,"pageTitle":"ğŸ” ä½¿ç”¨ TypeORM","url":"/docs/typeORM/useTypeorm#ä½¿ç”¨-typeorm","content":"","version":"Next","tagName":"h2"},{"title":"å®‰è£å¥—ä»¶â€‹","type":1,"pageTitle":"ğŸ” ä½¿ç”¨ TypeORM","url":"/docs/typeORM/useTypeorm#å®‰è£å¥—ä»¶","content":"pnpm add @nestjs/config pnpm add @nestjs/typeorm typeorm pg pnpm add joi pnpm add dotenv  ","version":"Next","tagName":"h3"},{"title":"è¨­å®šè³‡æ–™åº«é€£ç·šâ€‹","type":1,"pageTitle":"ğŸ” ä½¿ç”¨ TypeORM","url":"/docs/typeORM/useTypeorm#è¨­å®šè³‡æ–™åº«é€£ç·š","content":"å…ˆ import éœ€è¦çš„ä¾è³´ import { ConfigModule, ConfigService } from '@nestjs/config'; import { TypeOrmModule } from '@nestjs/typeorm'; import * as Joi from 'joi';  æ–¼ app.module.ts è¨­å®šé€£ç·š import { Module } from '@nestjs/common'; import { AppController } from './app.controller'; import { AppService } from './app.service'; import { ConfigModule, ConfigService } from '@nestjs/config'; import { TypeOrmModule } from '@nestjs/typeorm'; import * as Joi from 'joi'; @Module({ imports: [ ConfigModule.forRoot({ isGlobal: true, validationSchema: Joi.object({ DB_URI: Joi.string().required(), IS_DB_SSL_MODE: Joi.boolean().required(), }), }), TypeOrmModule.forRootAsync({ useFactory(configService: ConfigService) { const IS_DB_SSL_MODE = configService.getOrThrow&lt;boolean&gt;( 'IS_DB_SSL_MODE', false, ); return { ssl: IS_DB_SSL_MODE, // æ˜¯å¦è¦ä½¿ç”¨ ssl é€£ç·šï¼Œä¸€èˆ¬æ­£å¼é€£ç·šæœƒå•Ÿç”¨ extra: { ssl: IS_DB_SSL_MODE ? { rejectUnauthorized: false } : null, poolSize: 5, idleTimeoutMillis: 3600000, }, type: 'postgres',//é€£ç·šè³‡æ–™åº«çš„é¡å‹ url: configService.getOrThrow('DB_URI', ''), synchronize: false,//å¦è‡ªå‹•åŒæ­¥ entity åˆ°è³‡æ–™åº« table autoLoadEntity: true//æ˜¯å¦è‡ªå‹•è¼‰å…¥ Entity åˆ° forRoot TypeORM }; }, inject: [ConfigService], }), ], controllers: [AppController], providers: [AppService], }) export class AppModule { }  ","version":"Next","tagName":"h3"},{"title":"åŠ å…¥ Entityâ€‹","type":1,"pageTitle":"ğŸ” ä½¿ç”¨ TypeORM","url":"/docs/typeORM/useTypeorm#åŠ å…¥-entity","content":"æ–¼ inhabitant ç›®éŒ„åº•ä¸‹ï¼Œå»ºç«‹ä¸€å€‹æª”æ¡ˆç‚º inhabitant.entity.ts src â””â”€inhabitant â”‚â””â”€inhabitant.entity.ts â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€main.ts  import { Column, CreateDateColumn, Entity, PrimaryGeneratedColumn, UpdateDateColumn, } from 'typeorm'; @Entity('inhabitant', { schema: 'public' }) export class InhabitantEntity { @PrimaryGeneratedColumn('uuid') id: string; @Column({ name: 'idCard', type: 'nvarchar', length: 128 }) idCard: string; @Column({ name: 'name', type: 'nvarchar', length: 20 }) name: string; @Column({ name: 'hungry', type: 'int' }) hungry: number; @Column({ name: 'occupation', type: 'nvarchar', length: 10 }) occupation: string; @Column({ name: 'age', type: 'int' }) age: number; @Column({ name: 'money', type: 'int' }) money: number; @Column({ name: 'ban', type: 'boolean' }) ban: boolean; @CreateDateColumn({ name: 'create_time', type: 'datetime' }) create_time: Date; @UpdateDateColumn({ name: 'update_time', type: 'timestamp without time zone' }) update_time: Date; @Column({ name: 'update_user_id', type: 'nvarchar', length: 128 }) update_user_id: string; }  è¨»å†Š Entity nest generate module inhabitant  ","version":"Next","tagName":"h3"},{"title":"è¨­å®šè³‡æ–™åº«è½‰ç§»â€‹","type":1,"pageTitle":"ğŸ” ä½¿ç”¨ TypeORM","url":"/docs/typeORM/useTypeorm#è¨­å®šè³‡æ–™åº«è½‰ç§»","content":"æ–°å¢ typeorm.migration.ts src â””â”€inhabitant â”‚â””â”€inhabitant.entity.ts â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€typeorm.migration.ts â”‚ â””â”€main.ts  import { ConfigService } from '@nestjs/config'; import { config } from 'dotenv'; import { DataSource } from 'typeorm'; config(); const configService = new ConfigService(); const IS_DB_SSL_MODE = configService.getOrThrow&lt;boolean&gt;( 'IS_DB_SSL_MODE', false, ); export default new DataSource({ type: 'postgres', url: configService.get&lt;string&gt;('DB_URI', ''), ssl: IS_DB_SSL_MODE, extra: { ssl: IS_DB_SSL_MODE ? { rejectUnauthorized: false } : null, }, migrations: ['src/migrations/*.ts'], migrationsRun: true, entities: ['**/*.entity.ts'], });  æ–°å¢ .env src â””â”€inhabitant â”‚â””â”€inhabitant.entity.ts â”‚ â””â”€app.controller.spec.ts â”‚ â””â”€app.controller.ts â”‚ â””â”€app.module.ts â”‚ â””â”€app.service.ts â”‚ â””â”€typeorm.migration.ts â”‚ â””â”€.env â”‚ â””â”€main.ts  DB_URI=postgresql://${db_username}:${db_password}@${db_hostname}:${db_port}/${db_name}  ","version":"Next","tagName":"h3"},{"title":"æ–°å¢ scriptâ€‹","type":1,"pageTitle":"ğŸ” ä½¿ç”¨ TypeORM","url":"/docs/typeORM/useTypeorm#æ–°å¢-script","content":"æ–¼ package.js æ–°å¢ script &quot;typeorm&quot;: &quot;ts-node ./node_modules/typeorm/cli&quot;, &quot;schema:sync&quot;: &quot;pnpm run typeorm schema:sync -d src/typeorm.migration.ts&quot;, &quot;schema:drop&quot;: &quot;pnpm run typeorm schema:drop -d src/typeorm.migration.ts&quot;, &quot;schema:log&quot;: &quot;pnpm run typeorm schema:log -d src/typeorm.migration.ts&quot;, &quot;typeorm:show&quot;: &quot;pnpm run typeorm migration:show -d src/typeorm.migration.ts&quot;, &quot;typeorm:run-migrations&quot;: &quot;pnpm run typeorm -- migration:run -d src/typeorm.migration.ts&quot;, &quot;typeorm:create-migration&quot;: &quot;npm run typeorm -- migration:create src/migrations/$npm_config_name&quot;, &quot;typeorm:generate-migration&quot;: &quot;npm run typeorm -- migration:generate -d src/typeorm.migration.ts src/migrations/$npm_config_name&quot;, &quot;typeorm:revert-migration&quot;: &quot;pnpm run typeorm migration:revert -d src/typeorm.migration.ts&quot;  åœ¨ windows åº•ä¸‹ &quot;typeorm:create-migration&quot;: &quot;npm run typeorm -- migration:create src/migrations/$npm_config_name&quot;,  éœ€æ›æˆ &quot;typeorm:create-migration&quot;: &quot;npm run typeorm -- migration:create src/migrations/%npm_config_name%&quot;,  ","version":"Next","tagName":"h3"},{"title":"æ–°å¢ migrationâ€‹","type":1,"pageTitle":"ğŸ” ä½¿ç”¨ TypeORM","url":"/docs/typeORM/useTypeorm#æ–°å¢-migration","content":"npm run typeorm:create-migration --name=INHABITANT  import { MigrationInterface, QueryRunner, Table, TableColumn, TableForeignKey } from &quot;typeorm&quot;; export class INHABITANT1695957121944 implements MigrationInterface { public async up(queryRunner: QueryRunner): Promise&lt;void&gt; { await queryRunner.createTable(new Table({ name: &quot;inhabitant&quot;, schema: &quot;public&quot;, columns: [ { name: &quot;id&quot;, type: &quot;uuid&quot;, isPrimary: true, generationStrategy: &quot;uuid&quot;, default: &quot;uuid_generate_v4()&quot;, }, { name: &quot;idCard&quot;, type: &quot;nvarchar&quot;, length: &quot;128&quot;, }, { name: &quot;name&quot;, type: &quot;nvarchar&quot;, length: &quot;20&quot;, }, { name: &quot;hungry&quot;, type: &quot;int&quot;, }, { name: &quot;occupation&quot;, type: &quot;nvarchar&quot;, length: &quot;10&quot;, }, { name: &quot;age&quot;, type: &quot;int&quot;, }, { name: &quot;money&quot;, type: &quot;int&quot;, }, { name: &quot;ban&quot;, type: &quot;boolean&quot;, }, { name: &quot;create_time&quot;, type: &quot;datetime&quot;, }, { name: &quot;update_time&quot;, type: &quot;timestamp without time zone&quot;, }, { name: &quot;update_user_id&quot;, type: &quot;nvarchar&quot;, length: &quot;128&quot;, }, ], }), true); } public async down(queryRunner: QueryRunner): Promise&lt;void&gt; { await queryRunner.dropTable(&quot;inhabitant&quot;, true, true, true); } }  ","version":"Next","tagName":"h3"},{"title":"æ–°å¢ schemaâ€‹","type":1,"pageTitle":"ğŸ” ä½¿ç”¨ TypeORM","url":"/docs/typeORM/useTypeorm#æ–°å¢-schema","content":"pnpm run typeorm:run-migrations  æ­¤æ™‚å°±èƒ½çœ‹åˆ°è³‡æ–™åº«é•·å‡ºè¡¨æ ¼äº† ","version":"Next","tagName":"h3"},{"title":"REFâ€‹","type":1,"pageTitle":"ğŸ” ä½¿ç”¨ TypeORM","url":"/docs/typeORM/useTypeorm#ref","content":"å‰¯é®é•·-æ¢è¿ªå“¥ æ•™å­¸ ","version":"Next","tagName":"h2"}]